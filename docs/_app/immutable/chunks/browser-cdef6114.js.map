{"version":3,"file":"browser-cdef6114.js","sources":["../../../../../../node_modules/queue-microtask/index.js","../../../../../../node_modules/level-supports/index.js","../../../../../../node_modules/module-error/index.js","../../../../../../node_modules/level-transcoder/lib/text-endec.js","../../../../../../node_modules/level-transcoder/lib/encoding.js","../../../../../../node_modules/level-transcoder/lib/formats.js","../../../../../../node_modules/level-transcoder/lib/encodings.js","../../../../../../node_modules/level-transcoder/index.js","../../../../../../node_modules/catering/next-tick-browser.js","../../../../../../node_modules/catering/index.js","../../../../../../node_modules/abstract-level/lib/common.js","../../../../../../node_modules/abstract-level/abstract-iterator.js","../../../../../../node_modules/abstract-level/lib/default-kv-iterator.js","../../../../../../node_modules/abstract-level/lib/deferred-iterator.js","../../../../../../node_modules/abstract-level/abstract-chained-batch.js","../../../../../../node_modules/abstract-level/lib/default-chained-batch.js","../../../../../../node_modules/abstract-level/lib/range-options.js","../../../../../../node_modules/abstract-level/lib/next-tick-browser.js","../../../../../../node_modules/abstract-level/lib/abstract-sublevel-iterator.js","../../../../../../node_modules/abstract-level/lib/abstract-sublevel.js","../../../../../../node_modules/abstract-level/abstract-level.js","../../../../../../node_modules/abstract-level/index.js","../../../../../../node_modules/run-parallel-limit/index.js","../../../../../../node_modules/browser-level/util/key-range.js","../../../../../../node_modules/browser-level/util/deserialize.js","../../../../../../node_modules/browser-level/iterator.js","../../../../../../node_modules/browser-level/util/clear.js","../../../../../../node_modules/browser-level/index.js","../../../../../../node_modules/level/browser.js"],"sourcesContent":["/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict'\n\nexports.supports = function supports (...manifests) {\n  const manifest = manifests.reduce((acc, m) => Object.assign(acc, m), {})\n\n  return Object.assign(manifest, {\n    snapshots: manifest.snapshots || false,\n    permanence: manifest.permanence || false,\n    seek: manifest.seek || false,\n    clear: manifest.clear || false,\n    getMany: manifest.getMany || false,\n    keyIterator: manifest.keyIterator || false,\n    valueIterator: manifest.valueIterator || false,\n    iteratorNextv: manifest.iteratorNextv || false,\n    iteratorAll: manifest.iteratorAll || false,\n    status: manifest.status || false,\n    createIfMissing: manifest.createIfMissing || false,\n    errorIfExists: manifest.errorIfExists || false,\n    deferredOpen: manifest.deferredOpen || false,\n    promises: manifest.promises || false,\n    streams: manifest.streams || false,\n    encodings: Object.assign({}, manifest.encodings),\n    events: Object.assign({}, manifest.events),\n    additionalMethods: Object.assign({}, manifest.additionalMethods)\n  })\n}\n","'use strict'\n\nmodule.exports = class ModuleError extends Error {\n  /**\n   * @param {string} message Error message\n   * @param {{ code?: string, cause?: Error, expected?: boolean, transient?: boolean }} [options]\n   */\n  constructor (message, options) {\n    super(message || '')\n\n    if (typeof options === 'object' && options !== null) {\n      if (options.code) this.code = String(options.code)\n      if (options.expected) this.expected = true\n      if (options.transient) this.transient = true\n      if (options.cause) this.cause = options.cause\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor)\n    }\n  }\n}\n","'use strict'\n\n/** @type {{ textEncoder: TextEncoder, textDecoder: TextDecoder }|null} */\nlet lazy = null\n\n/**\n * Get semi-global instances of TextEncoder and TextDecoder.\n * @returns {{ textEncoder: TextEncoder, textDecoder: TextDecoder }}\n */\nmodule.exports = function () {\n  if (lazy === null) {\n    lazy = {\n      textEncoder: new TextEncoder(),\n      textDecoder: new TextDecoder()\n    }\n  }\n\n  return lazy\n}\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst formats = new Set(['buffer', 'view', 'utf8'])\n\n/**\n * @template TIn, TFormat, TOut\n * @abstract\n */\nclass Encoding {\n  /**\n   * @param {IEncoding<TIn,TFormat,TOut>} options\n   */\n  constructor (options) {\n    /** @type {(data: TIn) => TFormat} */\n    this.encode = options.encode || this.encode\n\n    /** @type {(data: TFormat) => TOut} */\n    this.decode = options.decode || this.decode\n\n    /** @type {string} */\n    this.name = options.name || this.name\n\n    /** @type {string} */\n    this.format = options.format || this.format\n\n    if (typeof this.encode !== 'function') {\n      throw new TypeError(\"The 'encode' property must be a function\")\n    }\n\n    if (typeof this.decode !== 'function') {\n      throw new TypeError(\"The 'decode' property must be a function\")\n    }\n\n    this.encode = this.encode.bind(this)\n    this.decode = this.decode.bind(this)\n\n    if (typeof this.name !== 'string' || this.name === '') {\n      throw new TypeError(\"The 'name' property must be a string\")\n    }\n\n    if (typeof this.format !== 'string' || !formats.has(this.format)) {\n      throw new TypeError(\"The 'format' property must be one of 'buffer', 'view', 'utf8'\")\n    }\n\n    if (options.createViewTranscoder) {\n      this.createViewTranscoder = options.createViewTranscoder\n    }\n\n    if (options.createBufferTranscoder) {\n      this.createBufferTranscoder = options.createBufferTranscoder\n    }\n\n    if (options.createUTF8Transcoder) {\n      this.createUTF8Transcoder = options.createUTF8Transcoder\n    }\n  }\n\n  get commonName () {\n    return /** @type {string} */ (this.name.split('+')[0])\n  }\n\n  /** @return {BufferFormat<TIn,TOut>} */\n  createBufferTranscoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'buffer'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n\n  /** @return {ViewFormat<TIn,TOut>} */\n  createViewTranscoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'view'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n\n  /** @return {UTF8Format<TIn,TOut>} */\n  createUTF8Transcoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'utf8'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n}\n\nexports.Encoding = Encoding\n\n/**\n * @typedef {import('./encoding').IEncoding<TIn,TFormat,TOut>} IEncoding\n * @template TIn, TFormat, TOut\n */\n\n/**\n * @typedef {import('./formats').BufferFormat<TIn,TOut>} BufferFormat\n * @template TIn, TOut\n */\n\n/**\n * @typedef {import('./formats').ViewFormat<TIn,TOut>} ViewFormat\n * @template TIn, TOut\n */\n\n/**\n * @typedef {import('./formats').UTF8Format<TIn,TOut>} UTF8Format\n * @template TIn, TOut\n */\n","'use strict'\n\nconst { Buffer } = require('buffer') || {}\nconst { Encoding } = require('./encoding')\nconst textEndec = require('./text-endec')\n\n/**\n * @template TIn, TOut\n * @extends {Encoding<TIn,Buffer,TOut>}\n */\nclass BufferFormat extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, Buffer, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'buffer' })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: this.encode, // Buffer is a view (UInt8Array)\n      decode: (data) => this.decode(\n        Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n      ),\n      name: `${this.name}+view`\n    })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return this\n  }\n}\n\n/**\n * @extends {Encoding<TIn,Uint8Array,TOut>}\n * @template TIn, TOut\n */\nclass ViewFormat extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, Uint8Array, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'view' })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: (data) => {\n        const view = this.encode(data)\n        return Buffer.from(view.buffer, view.byteOffset, view.byteLength)\n      },\n      decode: this.decode, // Buffer is a view (UInt8Array)\n      name: `${this.name}+buffer`\n    })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    return this\n  }\n}\n\n/**\n * @extends {Encoding<TIn,string,TOut>}\n * @template TIn, TOut\n */\nclass UTF8Format extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, string, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'utf8' })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: (data) => Buffer.from(this.encode(data), 'utf8'),\n      decode: (data) => this.decode(data.toString('utf8')),\n      name: `${this.name}+buffer`\n    })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    const { textEncoder, textDecoder } = textEndec()\n\n    return new ViewFormat({\n      encode: (data) => textEncoder.encode(this.encode(data)),\n      decode: (data) => this.decode(textDecoder.decode(data)),\n      name: `${this.name}+view`\n    })\n  }\n\n  /** @override */\n  createUTF8Transcoder () {\n    return this\n  }\n}\n\nexports.BufferFormat = BufferFormat\nexports.ViewFormat = ViewFormat\nexports.UTF8Format = UTF8Format\n\n/**\n * @typedef {import('./encoding').IEncoding<TIn,TFormat,TOut>} IEncoding\n * @template TIn, TFormat, TOut\n */\n","'use strict'\n\nconst { Buffer } = require('buffer') || { Buffer: { isBuffer: () => false } }\nconst { textEncoder, textDecoder } = require('./text-endec')()\nconst { BufferFormat, ViewFormat, UTF8Format } = require('./formats')\n\n/** @type {<T>(v: T) => v} */\nconst identity = (v) => v\n\n/**\n * @type {typeof import('./encodings').utf8}\n */\nexports.utf8 = new UTF8Format({\n  encode: function (data) {\n    // On node 16.9.1 buffer.toString() is 5x faster than TextDecoder\n    return Buffer.isBuffer(data)\n      ? data.toString('utf8')\n      : ArrayBuffer.isView(data)\n        ? textDecoder.decode(data)\n        : String(data)\n  },\n  decode: identity,\n  name: 'utf8',\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: function (data) {\n        return ArrayBuffer.isView(data) ? data : textEncoder.encode(data)\n      },\n      decode: function (data) {\n        return textDecoder.decode(data)\n      },\n      name: `${this.name}+view`\n    })\n  },\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: function (data) {\n        return Buffer.isBuffer(data)\n          ? data\n          : ArrayBuffer.isView(data)\n            ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n            : Buffer.from(String(data), 'utf8')\n      },\n      decode: function (data) {\n        return data.toString('utf8')\n      },\n      name: `${this.name}+buffer`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').json}\n */\nexports.json = new UTF8Format({\n  encode: JSON.stringify,\n  decode: JSON.parse,\n  name: 'json'\n})\n\n/**\n * @type {typeof import('./encodings').buffer}\n */\nexports.buffer = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data)\n      ? data\n      : ArrayBuffer.isView(data)\n        ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n        : Buffer.from(String(data), 'utf8')\n  },\n  decode: identity,\n  name: 'buffer',\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: function (data) {\n        return ArrayBuffer.isView(data) ? data : Buffer.from(String(data), 'utf8')\n      },\n      decode: function (data) {\n        return Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n      },\n      name: `${this.name}+view`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').view}\n */\nexports.view = new ViewFormat({\n  encode: function (data) {\n    return ArrayBuffer.isView(data) ? data : textEncoder.encode(data)\n  },\n  decode: identity,\n  name: 'view',\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: function (data) {\n        return Buffer.isBuffer(data)\n          ? data\n          : ArrayBuffer.isView(data)\n            ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n            : Buffer.from(String(data), 'utf8')\n      },\n      decode: identity,\n      name: `${this.name}+buffer`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').hex}\n */\nexports.hex = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data) ? data : Buffer.from(String(data), 'hex')\n  },\n  decode: function (buffer) {\n    return buffer.toString('hex')\n  },\n  name: 'hex'\n})\n\n/**\n * @type {typeof import('./encodings').base64}\n */\nexports.base64 = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data) ? data : Buffer.from(String(data), 'base64')\n  },\n  decode: function (buffer) {\n    return buffer.toString('base64')\n  },\n  name: 'base64'\n})\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst encodings = require('./lib/encodings')\nconst { Encoding } = require('./lib/encoding')\nconst { BufferFormat, ViewFormat, UTF8Format } = require('./lib/formats')\n\nconst kFormats = Symbol('formats')\nconst kEncodings = Symbol('encodings')\nconst validFormats = new Set(['buffer', 'view', 'utf8'])\n\n/** @template T */\nclass Transcoder {\n  /**\n   * @param {Array<'buffer'|'view'|'utf8'>} formats\n   */\n  constructor (formats) {\n    if (!Array.isArray(formats)) {\n      throw new TypeError(\"The first argument 'formats' must be an array\")\n    } else if (!formats.every(f => validFormats.has(f))) {\n      // Note: we only only support aliases in key- and valueEncoding options (where we already did)\n      throw new TypeError(\"Format must be one of 'buffer', 'view', 'utf8'\")\n    }\n\n    /** @type {Map<string|MixedEncoding<any, any, any>, Encoding<any, any, any>>} */\n    this[kEncodings] = new Map()\n    this[kFormats] = new Set(formats)\n\n    // Register encodings (done early in order to populate encodings())\n    for (const k in encodings) {\n      try {\n        this.encoding(k)\n      } catch (err) {\n        /* istanbul ignore if: assertion */\n        if (err.code !== 'LEVEL_ENCODING_NOT_SUPPORTED') throw err\n      }\n    }\n  }\n\n  /**\n   * @returns {Array<Encoding<any,T,any>>}\n   */\n  encodings () {\n    return Array.from(new Set(this[kEncodings].values()))\n  }\n\n  /**\n   * @param {string|MixedEncoding<any, any, any>} encoding\n   * @returns {Encoding<any, T, any>}\n   */\n  encoding (encoding) {\n    let resolved = this[kEncodings].get(encoding)\n\n    if (resolved === undefined) {\n      if (typeof encoding === 'string' && encoding !== '') {\n        resolved = lookup[encoding]\n\n        if (!resolved) {\n          throw new ModuleError(`Encoding '${encoding}' is not found`, {\n            code: 'LEVEL_ENCODING_NOT_FOUND'\n          })\n        }\n      } else if (typeof encoding !== 'object' || encoding === null) {\n        throw new TypeError(\"First argument 'encoding' must be a string or object\")\n      } else {\n        resolved = from(encoding)\n      }\n\n      const { name, format } = resolved\n\n      if (!this[kFormats].has(format)) {\n        if (this[kFormats].has('view')) {\n          resolved = resolved.createViewTranscoder()\n        } else if (this[kFormats].has('buffer')) {\n          resolved = resolved.createBufferTranscoder()\n        } else if (this[kFormats].has('utf8')) {\n          resolved = resolved.createUTF8Transcoder()\n        } else {\n          throw new ModuleError(`Encoding '${name}' cannot be transcoded`, {\n            code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n          })\n        }\n      }\n\n      for (const k of [encoding, name, resolved.name, resolved.commonName]) {\n        this[kEncodings].set(k, resolved)\n      }\n    }\n\n    return resolved\n  }\n}\n\nexports.Transcoder = Transcoder\n\n/**\n * @param {MixedEncoding<any, any, any>} options\n * @returns {Encoding<any, any, any>}\n */\nfunction from (options) {\n  if (options instanceof Encoding) {\n    return options\n  }\n\n  // Loosely typed for ecosystem compatibility\n  const maybeType = 'type' in options && typeof options.type === 'string' ? options.type : undefined\n  const name = options.name || maybeType || `anonymous-${anonymousCount++}`\n\n  switch (detectFormat(options)) {\n    case 'view': return new ViewFormat({ ...options, name })\n    case 'utf8': return new UTF8Format({ ...options, name })\n    case 'buffer': return new BufferFormat({ ...options, name })\n    default: {\n      throw new TypeError(\"Format must be one of 'buffer', 'view', 'utf8'\")\n    }\n  }\n}\n\n/**\n * If format is not provided, fallback to detecting `level-codec`\n * or `multiformats` encodings, else assume a format of buffer.\n * @param {MixedEncoding<any, any, any>} options\n * @returns {string}\n */\nfunction detectFormat (options) {\n  if ('format' in options && options.format !== undefined) {\n    return options.format\n  } else if ('buffer' in options && typeof options.buffer === 'boolean') {\n    return options.buffer ? 'buffer' : 'utf8' // level-codec\n  } else if ('code' in options && Number.isInteger(options.code)) {\n    return 'view' // multiformats\n  } else {\n    return 'buffer'\n  }\n}\n\n/**\n * @typedef {import('./lib/encoding').MixedEncoding<TIn,TFormat,TOut>} MixedEncoding\n * @template TIn, TFormat, TOut\n */\n\n/**\n * @type {Object.<string, Encoding<any, any, any>>}\n */\nconst aliases = {\n  binary: encodings.buffer,\n  'utf-8': encodings.utf8\n}\n\n/**\n * @type {Object.<string, Encoding<any, any, any>>}\n */\nconst lookup = {\n  ...encodings,\n  ...aliases\n}\n\nlet anonymousCount = 0\n","module.exports = typeof queueMicrotask === 'function' ? queueMicrotask : (fn) => Promise.resolve().then(fn)\n","'use strict'\n\nvar nextTick = require('./next-tick')\n\nexports.fromCallback = function (callback, symbol) {\n  if (callback === undefined) {\n    var promise = new Promise(function (resolve, reject) {\n      callback = function (err, res) {\n        if (err) reject(err)\n        else resolve(res)\n      }\n    })\n\n    callback[symbol !== undefined ? symbol : 'promise'] = promise\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('Callback must be a function')\n  }\n\n  return callback\n}\n\nexports.fromPromise = function (promise, callback) {\n  if (callback === undefined) return promise\n\n  promise\n    .then(function (res) { nextTick(() => callback(null, res)) })\n    .catch(function (err) { nextTick(() => callback(err)) })\n}\n","'use strict'\n\nexports.getCallback = function (options, callback) {\n  return typeof options === 'function' ? options : callback\n}\n\nexports.getOptions = function (options, def) {\n  if (typeof options === 'object' && options !== null) {\n    return options\n  }\n\n  if (def !== undefined) {\n    return def\n  }\n\n  return {}\n}\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getOptions, getCallback } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kCallback = Symbol('callback')\nconst kWorking = Symbol('working')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kAutoClose = Symbol('autoClose')\nconst kFinishWork = Symbol('finishWork')\nconst kReturnMany = Symbol('returnMany')\nconst kClosing = Symbol('closing')\nconst kHandleClose = Symbol('handleClose')\nconst kClosed = Symbol('closed')\nconst kCloseCallbacks = Symbol('closeCallbacks')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst kAbortOnClose = Symbol('abortOnClose')\nconst kLegacy = Symbol('legacy')\nconst kKeys = Symbol('keys')\nconst kValues = Symbol('values')\nconst kLimit = Symbol('limit')\nconst kCount = Symbol('count')\n\nconst emptyOptions = Object.freeze({})\nconst noop = () => {}\nlet warnedEnd = false\n\n// This class is an internal utility for common functionality between AbstractIterator,\n// AbstractKeyIterator and AbstractValueIterator. It's not exported.\nclass CommonIterator {\n  constructor (db, options, legacy) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    if (typeof options !== 'object' || options === null) {\n      throw new TypeError('The second argument must be an options object')\n    }\n\n    this[kClosed] = false\n    this[kCloseCallbacks] = []\n    this[kWorking] = false\n    this[kClosing] = false\n    this[kAutoClose] = false\n    this[kCallback] = null\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kHandleClose] = this[kHandleClose].bind(this)\n    this[kKeyEncoding] = options[kKeyEncoding]\n    this[kValueEncoding] = options[kValueEncoding]\n    this[kLegacy] = legacy\n    this[kLimit] = Number.isInteger(options.limit) && options.limit >= 0 ? options.limit : Infinity\n    this[kCount] = 0\n\n    // Undocumented option to abort pending work on close(). Used by the\n    // many-level module as a temporary solution to a blocked close().\n    // TODO (next major): consider making this the default behavior. Native\n    // implementations should have their own logic to safely close iterators.\n    this[kAbortOnClose] = !!options.abortOnClose\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get count () {\n    return this[kCount]\n  }\n\n  get limit () {\n    return this[kLimit]\n  }\n\n  next (callback) {\n    let promise\n\n    if (callback === undefined) {\n      promise = new Promise((resolve, reject) => {\n        callback = (err, key, value) => {\n          if (err) reject(err)\n          else if (!this[kLegacy]) resolve(key)\n          else if (key === undefined && value === undefined) resolve()\n          else resolve([key, value])\n        }\n      })\n    } else if (typeof callback !== 'function') {\n      throw new TypeError('Callback must be a function')\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call next() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleOne], null)\n      else this._next(this[kHandleOne])\n    }\n\n    return promise\n  }\n\n  _next (callback) {\n    this.nextTick(callback)\n  }\n\n  nextv (size, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (!Number.isInteger(size)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'size' must be an integer\"))\n      return callback[kPromise]\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call nextv() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      if (size < 1) size = 1\n      if (this[kLimit] < Infinity) size = Math.min(size, this[kLimit] - this[kCount])\n\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (size <= 0) this.nextTick(this[kHandleMany], null, [])\n      else this._nextv(size, options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _nextv (size, options, callback) {\n    const acc = []\n    const onnext = (err, key, value) => {\n      if (err) {\n        return callback(err)\n      } else if (this[kLegacy] ? key === undefined && value === undefined : key === undefined) {\n        return callback(null, acc)\n      }\n\n      acc.push(this[kLegacy] ? [key, value] : key)\n\n      if (acc.length === size) {\n        callback(null, acc)\n      } else {\n        this._next(onnext)\n      }\n    }\n\n    this._next(onnext)\n  }\n\n  all (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call all() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n      this[kAutoClose] = true\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleMany], null, [])\n      else this._all(options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _all (options, callback) {\n    // Must count here because we're directly calling _nextv()\n    let count = this[kCount]\n    const acc = []\n\n    const nextv = () => {\n      // Not configurable, because implementations should optimize _all().\n      const size = this[kLimit] < Infinity ? Math.min(1e3, this[kLimit] - count) : 1e3\n\n      if (size <= 0) {\n        this.nextTick(callback, null, acc)\n      } else {\n        this._nextv(size, emptyOptions, onnextv)\n      }\n    }\n\n    const onnextv = (err, items) => {\n      if (err) {\n        callback(err)\n      } else if (items.length === 0) {\n        callback(null, acc)\n      } else {\n        acc.push.apply(acc, items)\n        count += items.length\n        nextv()\n      }\n    }\n\n    nextv()\n  }\n\n  [kFinishWork] () {\n    const cb = this[kCallback]\n\n    // Callback will be null if work was aborted on close\n    if (this[kAbortOnClose] && cb === null) return noop\n\n    this[kWorking] = false\n    this[kCallback] = null\n\n    if (this[kClosing]) this._close(this[kHandleClose])\n\n    return cb\n  }\n\n  [kReturnMany] (cb, err, items) {\n    if (this[kAutoClose]) {\n      this.close(cb.bind(null, err, items))\n    } else {\n      cb(err, items)\n    }\n  }\n\n  seek (target, options) {\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      // Don't throw here, to be kind to implementations that wrap\n      // another db and don't necessarily control when the db is closed\n    } else if (this[kWorking]) {\n      throw new ModuleError('Iterator is busy: cannot call seek() until next() has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      })\n    } else {\n      const keyEncoding = this.db.keyEncoding(options.keyEncoding || this[kKeyEncoding])\n      const keyFormat = keyEncoding.format\n\n      if (options.keyEncoding !== keyFormat) {\n        options = { ...options, keyEncoding: keyFormat }\n      }\n\n      const mapped = this.db.prefixKey(keyEncoding.encode(target), keyFormat)\n      this._seek(mapped, options)\n    }\n  }\n\n  _seek (target, options) {\n    throw new ModuleError('Iterator does not support seek()', {\n      code: 'LEVEL_NOT_SUPPORTED'\n    })\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kClosed]) {\n      this.nextTick(callback)\n    } else if (this[kClosing]) {\n      this[kCloseCallbacks].push(callback)\n    } else {\n      this[kClosing] = true\n      this[kCloseCallbacks].push(callback)\n\n      if (!this[kWorking]) {\n        this._close(this[kHandleClose])\n      } else if (this[kAbortOnClose]) {\n        // Don't wait for work to finish. Subsequently ignore the result.\n        const cb = this[kFinishWork]()\n\n        cb(new ModuleError('Aborted on iterator close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }))\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kHandleClose] () {\n    this[kClosed] = true\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n\n  async * [Symbol.asyncIterator] () {\n    try {\n      let item\n\n      while ((item = (await this.next())) !== undefined) {\n        yield item\n      }\n    } finally {\n      if (!this[kClosed]) await this.close()\n    }\n  }\n}\n\n// For backwards compatibility this class is not (yet) called AbstractEntryIterator.\nclass AbstractIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, true)\n    this[kKeys] = options.keys !== false\n    this[kValues] = options.values !== false\n  }\n\n  [kHandleOne] (err, key, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      value = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('entry', err))\n    }\n\n    if (!(key === undefined && value === undefined)) {\n      this[kCount]++\n    }\n\n    cb(null, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (const entry of entries) {\n        const key = entry[0]\n        const value = entry[1]\n\n        entry[0] = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n        entry[1] = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('entries', err))\n    }\n\n    this[kCount] += entries.length\n    this[kReturnMany](cb, null, entries)\n  }\n\n  end (callback) {\n    if (!warnedEnd && typeof console !== 'undefined') {\n      warnedEnd = true\n      console.warn(new ModuleError(\n        'The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version',\n        { code: 'LEVEL_LEGACY' }\n      ))\n    }\n\n    return this.close(callback)\n  }\n}\n\nclass AbstractKeyIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, key) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('key', err))\n    }\n\n    if (key !== undefined) this[kCount]++\n    cb(null, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        keys[i] = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('keys', err))\n    }\n\n    this[kCount] += keys.length\n    this[kReturnMany](cb, null, keys)\n  }\n}\n\nclass AbstractValueIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      value = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('value', err))\n    }\n\n    if (value !== undefined) this[kCount]++\n    cb(null, value)\n  }\n\n  [kHandleMany] (err, values) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i]\n        values[i] = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('values', err))\n    }\n\n    this[kCount] += values.length\n    this[kReturnMany](cb, null, values)\n  }\n}\n\n// Internal utility, not typed or exported\nclass IteratorDecodeError extends ModuleError {\n  constructor (subject, cause) {\n    super(`Iterator could not decode ${subject}`, {\n      code: 'LEVEL_DECODE_ERROR',\n      cause\n    })\n  }\n}\n\n// To help migrating to abstract-level\nfor (const k of ['_ended property', '_nexting property', '_end method']) {\n  Object.defineProperty(AbstractIterator.prototype, k.split(' ')[0], {\n    get () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) },\n    set () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) }\n  })\n}\n\n// Exposed so that AbstractLevel can set these options\nAbstractIterator.keyEncoding = kKeyEncoding\nAbstractIterator.valueEncoding = kValueEncoding\n\nexports.AbstractIterator = AbstractIterator\nexports.AbstractKeyIterator = AbstractKeyIterator\nexports.AbstractValueIterator = AbstractValueIterator\n","'use strict'\n\nconst { AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kIterator = Symbol('iterator')\nconst kCallback = Symbol('callback')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\n\nclass DefaultKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: true, values: false })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nclass DefaultValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: false, values: true })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nfor (const Iterator of [DefaultKeyIterator, DefaultValueIterator]) {\n  const keys = Iterator === DefaultKeyIterator\n  const mapEntry = keys ? (entry) => entry[0] : (entry) => entry[1]\n\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype[kHandleOne] = function (err, key, value) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, keys ? key : value)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n\n  Iterator.prototype[kHandleMany] = function (err, entries) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, entries.map(mapEntry))\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\n// Internal utilities, should be typed as AbstractKeyIterator and AbstractValueIterator\nexports.DefaultKeyIterator = DefaultKeyIterator\nexports.DefaultValueIterator = DefaultValueIterator\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\nconst ModuleError = require('module-error')\n\nconst kNut = Symbol('nut')\nconst kUndefer = Symbol('undefer')\nconst kFactory = Symbol('factory')\n\nclass DeferredIterator extends AbstractIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.iterator(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.keys(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.values(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nfor (const Iterator of [DeferredIterator, DeferredKeyIterator, DeferredValueIterator]) {\n  Iterator.prototype[kUndefer] = function () {\n    if (this.db.status === 'open') {\n      this[kNut] = this[kFactory]()\n    }\n  }\n\n  Iterator.prototype._next = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].next(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._next(callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].nextv(size, options, callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._nextv(size, options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].all(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._all(options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    if (this[kNut] !== null) {\n      // TODO: explain why we need _seek() rather than seek() here\n      this[kNut]._seek(target, options)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._seek(target, options))\n    }\n  }\n\n  Iterator.prototype._close = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].close(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._close(callback))\n    } else {\n      this.nextTick(callback)\n    }\n  }\n}\n\nexports.DeferredIterator = DeferredIterator\nexports.DeferredKeyIterator = DeferredKeyIterator\nexports.DeferredValueIterator = DeferredValueIterator\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getCallback, getOptions } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kStatus = Symbol('status')\nconst kOperations = Symbol('operations')\nconst kFinishClose = Symbol('finishClose')\nconst kCloseCallbacks = Symbol('closeCallbacks')\n\nclass AbstractChainedBatch {\n  constructor (db) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    this[kOperations] = []\n    this[kCloseCallbacks] = []\n    this[kStatus] = 'open'\n    this[kFinishClose] = this[kFinishClose].bind(this)\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get length () {\n    return this[kOperations].length\n  }\n\n  put (key, value, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call put() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key) || this.db._checkValue(value)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = db.valueEncoding(options && options.valueEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat, valueEncoding: valueEncoding.format }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    const mappedKey = db.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options)\n    this[kOperations].push({ ...original, type: 'put', key, value })\n\n    return this\n  }\n\n  _put (key, value, options) {}\n\n  del (key, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call del() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    this._del(db.prefixKey(keyEncoding.encode(key), keyFormat), options)\n    this[kOperations].push({ ...original, type: 'del', key })\n\n    return this\n  }\n\n  _del (key, options) {}\n\n  clear () {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call clear() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    this._clear()\n    this[kOperations] = []\n\n    return this\n  }\n\n  _clear () {}\n\n  write (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options)\n\n    if (this[kStatus] !== 'open') {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    } else if (this.length === 0) {\n      this.close(callback)\n    } else {\n      this[kStatus] = 'writing'\n      this._write(options, (err) => {\n        this[kStatus] = 'closing'\n        this[kCloseCallbacks].push(() => callback(err))\n\n        // Emit after setting 'closing' status, because event may trigger a\n        // db close which in turn triggers (idempotently) closing this batch.\n        if (!err) this.db.emit('batch', this[kOperations])\n\n        this._close(this[kFinishClose])\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _write (options, callback) {}\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kStatus] === 'closing') {\n      this[kCloseCallbacks].push(callback)\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(callback)\n    } else {\n      this[kCloseCallbacks].push(callback)\n\n      if (this[kStatus] !== 'writing') {\n        this[kStatus] = 'closing'\n        this._close(this[kFinishClose])\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kFinishClose] () {\n    this[kStatus] = 'closed'\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n}\n\nexports.AbstractChainedBatch = AbstractChainedBatch\n","'use strict'\n\nconst { AbstractChainedBatch } = require('../abstract-chained-batch')\nconst ModuleError = require('module-error')\nconst kEncoded = Symbol('encoded')\n\n// Functional default for chained batch, with support of deferred open\nclass DefaultChainedBatch extends AbstractChainedBatch {\n  constructor (db) {\n    super(db)\n    this[kEncoded] = []\n  }\n\n  _put (key, value, options) {\n    this[kEncoded].push({ ...options, type: 'put', key, value })\n  }\n\n  _del (key, options) {\n    this[kEncoded].push({ ...options, type: 'del', key })\n  }\n\n  _clear () {\n    this[kEncoded] = []\n  }\n\n  // Assumes this[kEncoded] cannot change after write()\n  _write (options, callback) {\n    if (this.db.status === 'opening') {\n      this.db.defer(() => this._write(options, callback))\n    } else if (this.db.status === 'open') {\n      if (this[kEncoded].length === 0) this.nextTick(callback)\n      else this.db._batch(this[kEncoded], options, callback)\n    } else {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    }\n  }\n}\n\nexports.DefaultChainedBatch = DefaultChainedBatch\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nconst rangeOptions = new Set(['lt', 'lte', 'gt', 'gte'])\n\nmodule.exports = function (options, keyEncoding) {\n  const result = {}\n\n  for (const k in options) {\n    if (!hasOwnProperty.call(options, k)) continue\n    if (k === 'keyEncoding' || k === 'valueEncoding') continue\n\n    if (k === 'start' || k === 'end') {\n      throw new ModuleError(`The legacy range option '${k}' has been removed`, {\n        code: 'LEVEL_LEGACY'\n      })\n    } else if (k === 'encoding') {\n      // To help migrating to abstract-level\n      throw new ModuleError(\"The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead\", {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    if (rangeOptions.has(k)) {\n      // Note that we don't reject nullish and empty options here. While\n      // those types are invalid as keys, they are valid as range options.\n      result[k] = keyEncoding.encode(options[k])\n    } else {\n      result[k] = options[k]\n    }\n  }\n\n  result.reverse = !!result.reverse\n  result.limit = Number.isInteger(result.limit) && result.limit >= 0 ? result.limit : -1\n\n  return result\n}\n","'use strict'\n\nconst queueMicrotask = require('queue-microtask')\n\nmodule.exports = function (fn, ...args) {\n  if (args.length === 0) {\n    queueMicrotask(fn)\n  } else {\n    queueMicrotask(() => fn(...args))\n  }\n}\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kUnfix = Symbol('unfix')\nconst kIterator = Symbol('iterator')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kCallback = Symbol('callback')\n\n// TODO: unfix natively if db supports it\nclass AbstractSublevelIterator extends AbstractIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key, value) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (const entry of entries) {\n      const key = entry[0]\n      if (key !== undefined) entry[0] = this[kUnfix](key)\n    }\n\n    callback(err, entries)\n  }\n}\n\nclass AbstractSublevelKeyIterator extends AbstractKeyIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      if (key !== undefined) keys[i] = this[kUnfix](key)\n    }\n\n    callback(err, keys)\n  }\n}\n\nclass AbstractSublevelValueIterator extends AbstractValueIterator {\n  constructor (db, options, iterator) {\n    super(db, options)\n    this[kIterator] = iterator\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n}\n\nfor (const Iterator of [AbstractSublevelValueIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kIterator].next(callback)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kIterator].nextv(size, options, callback)\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kIterator].all(options, callback)\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator, AbstractSublevelValueIterator]) {\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\nexports.AbstractSublevelIterator = AbstractSublevelIterator\nexports.AbstractSublevelKeyIterator = AbstractSublevelKeyIterator\nexports.AbstractSublevelValueIterator = AbstractSublevelValueIterator\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst { Buffer } = require('buffer') || {}\nconst {\n  AbstractSublevelIterator,\n  AbstractSublevelKeyIterator,\n  AbstractSublevelValueIterator\n} = require('./abstract-sublevel-iterator')\n\nconst kPrefix = Symbol('prefix')\nconst kUpperBound = Symbol('upperBound')\nconst kPrefixRange = Symbol('prefixRange')\nconst kParent = Symbol('parent')\nconst kUnfix = Symbol('unfix')\n\nconst textEncoder = new TextEncoder()\nconst defaults = { separator: '!' }\n\n// Wrapped to avoid circular dependency\nmodule.exports = function ({ AbstractLevel }) {\n  class AbstractSublevel extends AbstractLevel {\n    static defaults (options) {\n      // To help migrating from subleveldown to abstract-level\n      if (typeof options === 'string') {\n        throw new ModuleError('The subleveldown string shorthand for { separator } has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      } else if (options && options.open) {\n        throw new ModuleError('The subleveldown open option has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      }\n\n      if (options == null) {\n        return defaults\n      } else if (!options.separator) {\n        return { ...options, separator: '!' }\n      } else {\n        return options\n      }\n    }\n\n    // TODO: add autoClose option, which if true, does parent.attachResource(this)\n    constructor (db, name, options) {\n      // Don't forward AbstractSublevel options to AbstractLevel\n      const { separator, manifest, ...forward } = AbstractSublevel.defaults(options)\n      name = trim(name, separator)\n\n      // Reserve one character between separator and name to give us an upper bound\n      const reserved = separator.charCodeAt(0) + 1\n      const parent = db[kParent] || db\n\n      // Keys should sort like ['!a!', '!a!!a!', '!a\"', '!aa!', '!b!'].\n      // Use ASCII for consistent length between string, Buffer and Uint8Array\n      if (!textEncoder.encode(name).every(x => x > reserved && x < 127)) {\n        throw new ModuleError(`Prefix must use bytes > ${reserved} < ${127}`, {\n          code: 'LEVEL_INVALID_PREFIX'\n        })\n      }\n\n      super(mergeManifests(parent, manifest), forward)\n\n      const prefix = (db.prefix || '') + separator + name + separator\n      const upperBound = prefix.slice(0, -1) + String.fromCharCode(reserved)\n\n      this[kParent] = parent\n      this[kPrefix] = new MultiFormat(prefix)\n      this[kUpperBound] = new MultiFormat(upperBound)\n      this[kUnfix] = new Unfixer()\n\n      this.nextTick = parent.nextTick\n    }\n\n    prefixKey (key, keyFormat) {\n      if (keyFormat === 'utf8') {\n        return this[kPrefix].utf8 + key\n      } else if (key.byteLength === 0) {\n        // Fast path for empty key (no copy)\n        return this[kPrefix][keyFormat]\n      } else if (keyFormat === 'view') {\n        const view = this[kPrefix].view\n        const result = new Uint8Array(view.byteLength + key.byteLength)\n\n        result.set(view, 0)\n        result.set(key, view.byteLength)\n\n        return result\n      } else {\n        const buffer = this[kPrefix].buffer\n        return Buffer.concat([buffer, key], buffer.byteLength + key.byteLength)\n      }\n    }\n\n    // Not exposed for now.\n    [kPrefixRange] (range, keyFormat) {\n      if (range.gte !== undefined) {\n        range.gte = this.prefixKey(range.gte, keyFormat)\n      } else if (range.gt !== undefined) {\n        range.gt = this.prefixKey(range.gt, keyFormat)\n      } else {\n        range.gte = this[kPrefix][keyFormat]\n      }\n\n      if (range.lte !== undefined) {\n        range.lte = this.prefixKey(range.lte, keyFormat)\n      } else if (range.lt !== undefined) {\n        range.lt = this.prefixKey(range.lt, keyFormat)\n      } else {\n        range.lte = this[kUpperBound][keyFormat]\n      }\n    }\n\n    get prefix () {\n      return this[kPrefix].utf8\n    }\n\n    get db () {\n      return this[kParent]\n    }\n\n    _open (options, callback) {\n      // The parent db must open itself or be (re)opened by the user because\n      // a sublevel should not initiate state changes on the rest of the db.\n      this[kParent].open({ passive: true }, callback)\n    }\n\n    _put (key, value, options, callback) {\n      this[kParent].put(key, value, options, callback)\n    }\n\n    _get (key, options, callback) {\n      this[kParent].get(key, options, callback)\n    }\n\n    _getMany (keys, options, callback) {\n      this[kParent].getMany(keys, options, callback)\n    }\n\n    _del (key, options, callback) {\n      this[kParent].del(key, options, callback)\n    }\n\n    _batch (operations, options, callback) {\n      this[kParent].batch(operations, options, callback)\n    }\n\n    _clear (options, callback) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      this[kParent].clear(options, callback)\n    }\n\n    _iterator (options) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].iterator(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelIterator(this, options, iterator, unfix)\n    }\n\n    _keys (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].keys(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelKeyIterator(this, options, iterator, unfix)\n    }\n\n    _values (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].values(options)\n      return new AbstractSublevelValueIterator(this, options, iterator)\n    }\n  }\n\n  return { AbstractSublevel }\n}\n\nconst mergeManifests = function (parent, manifest) {\n  return {\n    // Inherit manifest of parent db\n    ...parent.supports,\n\n    // Disable unsupported features\n    createIfMissing: false,\n    errorIfExists: false,\n\n    // Unset additional events because we're not forwarding them\n    events: {},\n\n    // Unset additional methods (like approximateSize) which we can't support here unless\n    // the AbstractSublevel class is overridden by an implementation of `abstract-level`.\n    additionalMethods: {},\n\n    // Inherit manifest of custom AbstractSublevel subclass. Such a class is not\n    // allowed to override encodings.\n    ...manifest,\n\n    encodings: {\n      utf8: supportsEncoding(parent, 'utf8'),\n      buffer: supportsEncoding(parent, 'buffer'),\n      view: supportsEncoding(parent, 'view')\n    }\n  }\n}\n\nconst supportsEncoding = function (parent, encoding) {\n  // Prefer a non-transcoded encoding for optimal performance\n  return parent.supports.encodings[encoding]\n    ? parent.keyEncoding(encoding).name === encoding\n    : false\n}\n\nclass MultiFormat {\n  constructor (key) {\n    this.utf8 = key\n    this.view = textEncoder.encode(key)\n    this.buffer = Buffer ? Buffer.from(this.view.buffer, 0, this.view.byteLength) : {}\n  }\n}\n\nclass Unfixer {\n  constructor () {\n    this.cache = new Map()\n  }\n\n  get (prefixLength, keyFormat) {\n    let unfix = this.cache.get(keyFormat)\n\n    if (unfix === undefined) {\n      if (keyFormat === 'view') {\n        unfix = function (prefixLength, key) {\n          // Avoid Uint8Array#slice() because it copies\n          return key.subarray(prefixLength)\n        }.bind(null, prefixLength)\n      } else {\n        unfix = function (prefixLength, key) {\n          // Avoid Buffer#subarray() because it's slow\n          return key.slice(prefixLength)\n        }.bind(null, prefixLength)\n      }\n\n      this.cache.set(keyFormat, unfix)\n    }\n\n    return unfix\n  }\n}\n\nconst trim = function (str, char) {\n  let start = 0\n  let end = str.length\n\n  while (start < end && str[start] === char) start++\n  while (end > start && str[end - 1] === char) end--\n\n  return str.slice(start, end)\n}\n","'use strict'\n\nconst { supports } = require('level-supports')\nconst { Transcoder } = require('level-transcoder')\nconst { EventEmitter } = require('events')\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { AbstractIterator } = require('./abstract-iterator')\nconst { DefaultKeyIterator, DefaultValueIterator } = require('./lib/default-kv-iterator')\nconst { DeferredIterator, DeferredKeyIterator, DeferredValueIterator } = require('./lib/deferred-iterator')\nconst { DefaultChainedBatch } = require('./lib/default-chained-batch')\nconst { getCallback, getOptions } = require('./lib/common')\nconst rangeOptions = require('./lib/range-options')\n\nconst kPromise = Symbol('promise')\nconst kLanded = Symbol('landed')\nconst kResources = Symbol('resources')\nconst kCloseResources = Symbol('closeResources')\nconst kOperations = Symbol('operations')\nconst kUndefer = Symbol('undefer')\nconst kDeferOpen = Symbol('deferOpen')\nconst kOptions = Symbol('options')\nconst kStatus = Symbol('status')\nconst kDefaultOptions = Symbol('defaultOptions')\nconst kTranscoder = Symbol('transcoder')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst noop = () => {}\n\nclass AbstractLevel extends EventEmitter {\n  constructor (manifest, options) {\n    super()\n\n    if (typeof manifest !== 'object' || manifest === null) {\n      throw new TypeError(\"The first argument 'manifest' must be an object\")\n    }\n\n    options = getOptions(options)\n    const { keyEncoding, valueEncoding, passive, ...forward } = options\n\n    this[kResources] = new Set()\n    this[kOperations] = []\n    this[kDeferOpen] = true\n    this[kOptions] = forward\n    this[kStatus] = 'opening'\n\n    this.supports = supports(manifest, {\n      status: true,\n      promises: true,\n      clear: true,\n      getMany: true,\n      deferredOpen: true,\n\n      // TODO (next major): add seek\n      snapshots: manifest.snapshots !== false,\n      permanence: manifest.permanence !== false,\n\n      // TODO: remove from level-supports because it's always supported\n      keyIterator: true,\n      valueIterator: true,\n      iteratorNextv: true,\n      iteratorAll: true,\n\n      encodings: manifest.encodings || {},\n      events: Object.assign({}, manifest.events, {\n        opening: true,\n        open: true,\n        closing: true,\n        closed: true,\n        put: true,\n        del: true,\n        batch: true,\n        clear: true\n      })\n    })\n\n    this[kTranscoder] = new Transcoder(formats(this))\n    this[kKeyEncoding] = this[kTranscoder].encoding(keyEncoding || 'utf8')\n    this[kValueEncoding] = this[kTranscoder].encoding(valueEncoding || 'utf8')\n\n    // Add custom and transcoder encodings to manifest\n    for (const encoding of this[kTranscoder].encodings()) {\n      if (!this.supports.encodings[encoding.commonName]) {\n        this.supports.encodings[encoding.commonName] = true\n      }\n    }\n\n    this[kDefaultOptions] = {\n      empty: Object.freeze({}),\n      entry: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName,\n        valueEncoding: this[kValueEncoding].commonName\n      }),\n      key: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName\n      })\n    }\n\n    // Let subclass finish its constructor\n    this.nextTick(() => {\n      if (this[kDeferOpen]) {\n        this.open({ passive: false }, noop)\n      }\n    })\n  }\n\n  get status () {\n    return this[kStatus]\n  }\n\n  keyEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kKeyEncoding])\n  }\n\n  valueEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kValueEncoding])\n  }\n\n  open (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n\n    options = { ...this[kOptions], ...getOptions(options) }\n\n    options.createIfMissing = options.createIfMissing !== false\n    options.errorIfExists = !!options.errorIfExists\n\n    const maybeOpened = (err) => {\n      if (this[kStatus] === 'closing' || this[kStatus] === 'opening') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? () => maybeOpened(err) : maybeOpened)\n      } else if (this[kStatus] !== 'open') {\n        callback(new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (options.passive) {\n      if (this[kStatus] === 'opening') {\n        this.once(kLanded, maybeOpened)\n      } else {\n        this.nextTick(maybeOpened)\n      }\n    } else if (this[kStatus] === 'closed' || this[kDeferOpen]) {\n      this[kDeferOpen] = false\n      this[kStatus] = 'opening'\n      this.emit('opening')\n\n      this._open(options, (err) => {\n        if (err) {\n          this[kStatus] = 'closed'\n\n          // Resources must be safe to close in any db state\n          this[kCloseResources](() => {\n            this.emit(kLanded)\n            maybeOpened(err)\n          })\n\n          this[kUndefer]()\n          return\n        }\n\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n\n        // Only emit public event if pending state changes are done\n        if (this[kStatus] === 'open') this.emit('open')\n\n        // TODO (next major): remove this alias\n        if (this[kStatus] === 'open') this.emit('ready')\n\n        maybeOpened()\n      })\n    } else if (this[kStatus] === 'open') {\n      this.nextTick(maybeOpened)\n    } else {\n      this.once(kLanded, () => this.open(options, callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  _open (options, callback) {\n    this.nextTick(callback)\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    const maybeClosed = (err) => {\n      if (this[kStatus] === 'opening' || this[kStatus] === 'closing') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? maybeClosed(err) : maybeClosed)\n      } else if (this[kStatus] !== 'closed') {\n        callback(new ModuleError('Database is not closed', {\n          code: 'LEVEL_DATABASE_NOT_CLOSED',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (this[kStatus] === 'open') {\n      this[kStatus] = 'closing'\n      this.emit('closing')\n\n      const cancel = (err) => {\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n        maybeClosed(err)\n      }\n\n      this[kCloseResources](() => {\n        this._close((err) => {\n          if (err) return cancel(err)\n\n          this[kStatus] = 'closed'\n          this[kUndefer]()\n          this.emit(kLanded)\n\n          // Only emit public event if pending state changes are done\n          if (this[kStatus] === 'closed') this.emit('closed')\n\n          maybeClosed()\n        })\n      })\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(maybeClosed)\n    } else {\n      this.once(kLanded, () => this.close(callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  [kCloseResources] (callback) {\n    if (this[kResources].size === 0) {\n      return this.nextTick(callback)\n    }\n\n    let pending = this[kResources].size\n    let sync = true\n\n    const next = () => {\n      if (--pending === 0) {\n        // We don't have tests for generic resources, so dezalgo\n        if (sync) this.nextTick(callback)\n        else callback()\n      }\n    }\n\n    // In parallel so that all resources know they are closed\n    for (const resource of this[kResources]) {\n      resource.close(next)\n    }\n\n    sync = false\n    this[kResources].clear()\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  get (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.get(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options to the underlying store\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      // Avoid spread operator because of https://bugs.chromium.org/p/chromium/issues/detail?id=1204540\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    this._get(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err, value) => {\n      if (err) {\n        // Normalize not found error for backwards compatibility with abstract-leveldown and level(up)\n        if (err.code === 'LEVEL_NOT_FOUND' || err.notFound || /NotFound/i.test(err)) {\n          if (!err.code) err.code = 'LEVEL_NOT_FOUND' // Preferred way going forward\n          if (!err.notFound) err.notFound = true // Same as level-errors\n          if (!err.status) err.status = 404 // Same as level-errors\n        }\n\n        return callback(err)\n      }\n\n      try {\n        value = valueEncoding.decode(value)\n      } catch (err) {\n        return callback(new ModuleError('Could not decode value', {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, value)\n    })\n\n    return callback[kPromise]\n  }\n\n  _get (key, options, callback) {\n    this.nextTick(callback, new Error('NotFound'))\n  }\n\n  getMany (keys, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.getMany(keys, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(keys)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'keys' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (keys.length === 0) {\n      this.nextTick(callback, null, [])\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKeys = new Array(keys.length)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      const err = this._checkKey(key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      mappedKeys[i] = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    }\n\n    this._getMany(mappedKeys, options, (err, values) => {\n      if (err) return callback(err)\n\n      try {\n        for (let i = 0; i < values.length; i++) {\n          if (values[i] !== undefined) {\n            values[i] = valueEncoding.decode(values[i])\n          }\n        }\n      } catch (err) {\n        return callback(new ModuleError(`Could not decode one or more of ${values.length} value(s)`, {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, values)\n    })\n\n    return callback[kPromise]\n  }\n\n  _getMany (keys, options, callback) {\n    this.nextTick(callback, null, new Array(keys.length).fill(undefined))\n  }\n\n  put (key, value, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.put(key, value, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key) || this._checkValue(value)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKey = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options, (err) => {\n      if (err) return callback(err)\n      this.emit('put', key, value)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _put (key, value, options, callback) {\n    this.nextTick(callback)\n  }\n\n  del (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].key)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.del(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat })\n    }\n\n    this._del(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err) => {\n      if (err) return callback(err)\n      this.emit('del', key)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _del (key, options, callback) {\n    this.nextTick(callback)\n  }\n\n  batch (operations, options, callback) {\n    if (!arguments.length) {\n      if (this[kStatus] === 'opening') return new DefaultChainedBatch(this)\n      if (this[kStatus] !== 'open') {\n        throw new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN'\n        })\n      }\n      return this._chainedBatch()\n    }\n\n    if (typeof operations === 'function') callback = operations\n    else callback = getCallback(options, callback)\n\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.batch(operations, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(operations)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'operations' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (operations.length === 0) {\n      this.nextTick(callback)\n      return callback[kPromise]\n    }\n\n    const mapped = new Array(operations.length)\n    const { keyEncoding: ke, valueEncoding: ve, ...forward } = options\n\n    for (let i = 0; i < operations.length; i++) {\n      if (typeof operations[i] !== 'object' || operations[i] === null) {\n        this.nextTick(callback, new TypeError('A batch operation must be an object'))\n        return callback[kPromise]\n      }\n\n      const op = Object.assign({}, operations[i])\n\n      if (op.type !== 'put' && op.type !== 'del') {\n        this.nextTick(callback, new TypeError(\"A batch operation must have a type property that is 'put' or 'del'\"))\n        return callback[kPromise]\n      }\n\n      const err = this._checkKey(op.key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      const db = op.sublevel != null ? op.sublevel : this\n      const keyEncoding = db.keyEncoding(op.keyEncoding || ke)\n      const keyFormat = keyEncoding.format\n\n      op.key = db.prefixKey(keyEncoding.encode(op.key), keyFormat)\n      op.keyEncoding = keyFormat\n\n      if (op.type === 'put') {\n        const valueErr = this._checkValue(op.value)\n\n        if (valueErr) {\n          this.nextTick(callback, valueErr)\n          return callback[kPromise]\n        }\n\n        const valueEncoding = db.valueEncoding(op.valueEncoding || ve)\n\n        op.value = valueEncoding.encode(op.value)\n        op.valueEncoding = valueEncoding.format\n      }\n\n      // Prevent double prefixing\n      if (db !== this) {\n        op.sublevel = null\n      }\n\n      mapped[i] = op\n    }\n\n    this._batch(mapped, forward, (err) => {\n      if (err) return callback(err)\n      this.emit('batch', operations)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _batch (operations, options, callback) {\n    this.nextTick(callback)\n  }\n\n  sublevel (name, options) {\n    return this._sublevel(name, AbstractSublevel.defaults(options))\n  }\n\n  _sublevel (name, options) {\n    return new AbstractSublevel(this, name, options)\n  }\n\n  prefixKey (key, keyFormat) {\n    return key\n  }\n\n  clear (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.clear(options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const original = options\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keyEncoding = keyEncoding.format\n\n    if (options.limit === 0) {\n      this.nextTick(callback)\n    } else {\n      this._clear(options, (err) => {\n        if (err) return callback(err)\n        this.emit('clear', original)\n        callback()\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _clear (options, callback) {\n    this.nextTick(callback)\n  }\n\n  iterator (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keys = options.keys !== false\n    options.values = options.values !== false\n\n    // We need the original encoding options in AbstractIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._iterator(options)\n  }\n\n  _iterator (options) {\n    return new AbstractIterator(this, options)\n  }\n\n  keys (options) {\n    // Also include valueEncoding (though unused) because we may fallback to _iterator()\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractKeyIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredKeyIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._keys(options)\n  }\n\n  _keys (options) {\n    return new DefaultKeyIterator(this, options)\n  }\n\n  values (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractValueIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredValueIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._values(options)\n  }\n\n  _values (options) {\n    return new DefaultValueIterator(this, options)\n  }\n\n  defer (fn) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('The first argument must be a function')\n    }\n\n    this[kOperations].push(fn)\n  }\n\n  [kUndefer] () {\n    if (this[kOperations].length === 0) {\n      return\n    }\n\n    const operations = this[kOperations]\n    this[kOperations] = []\n\n    for (const op of operations) {\n      op()\n    }\n  }\n\n  // TODO: docs and types\n  attachResource (resource) {\n    if (typeof resource !== 'object' || resource === null ||\n      typeof resource.close !== 'function') {\n      throw new TypeError('The first argument must be a resource object')\n    }\n\n    this[kResources].add(resource)\n  }\n\n  // TODO: docs and types\n  detachResource (resource) {\n    this[kResources].delete(resource)\n  }\n\n  _chainedBatch () {\n    return new DefaultChainedBatch(this)\n  }\n\n  _checkKey (key) {\n    if (key === null || key === undefined) {\n      return new ModuleError('Key cannot be null or undefined', {\n        code: 'LEVEL_INVALID_KEY'\n      })\n    }\n  }\n\n  _checkValue (value) {\n    if (value === null || value === undefined) {\n      return new ModuleError('Value cannot be null or undefined', {\n        code: 'LEVEL_INVALID_VALUE'\n      })\n    }\n  }\n}\n\n// Expose browser-compatible nextTick for dependents\n// TODO: after we drop node 10, also use queueMicrotask in node\nAbstractLevel.prototype.nextTick = require('./lib/next-tick')\n\nconst { AbstractSublevel } = require('./lib/abstract-sublevel')({ AbstractLevel })\n\nexports.AbstractLevel = AbstractLevel\nexports.AbstractSublevel = AbstractSublevel\n\nconst maybeError = function (db, callback) {\n  if (db[kStatus] !== 'open') {\n    db.nextTick(callback, new ModuleError('Database is not open', {\n      code: 'LEVEL_DATABASE_NOT_OPEN'\n    }))\n    return true\n  }\n\n  return false\n}\n\nconst formats = function (db) {\n  return Object.keys(db.supports.encodings)\n    .filter(k => !!db.supports.encodings[k])\n}\n","'use strict'\n\nexports.AbstractLevel = require('./abstract-level').AbstractLevel\nexports.AbstractSublevel = require('./abstract-level').AbstractSublevel\nexports.AbstractIterator = require('./abstract-iterator').AbstractIterator\nexports.AbstractKeyIterator = require('./abstract-iterator').AbstractKeyIterator\nexports.AbstractValueIterator = require('./abstract-iterator').AbstractValueIterator\nexports.AbstractChainedBatch = require('./abstract-chained-batch').AbstractChainedBatch\n","/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallelLimit\n\nconst queueMicrotask = require('queue-microtask')\n\nfunction runParallelLimit (tasks, limit, cb) {\n  if (typeof limit !== 'number') throw new Error('second argument must be a Number')\n  let results, len, pending, keys, isErrored\n  let isSync = true\n  let next\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = len = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = len = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) queueMicrotask(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (err) isErrored = true\n    if (--pending === 0 || err) {\n      done(err)\n    } else if (!isErrored && next < len) {\n      let key\n      if (keys) {\n        key = keys[next]\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      } else {\n        key = next\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      }\n    }\n  }\n\n  next = limit\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.some(function (key, i) {\n      tasks[key](function (err, result) { each(key, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  } else {\n    // array\n    tasks.some(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  }\n\n  isSync = false\n}\n","/* global IDBKeyRange */\n\n'use strict'\n\nmodule.exports = function createKeyRange (options) {\n  const lower = options.gte !== undefined ? options.gte : options.gt !== undefined ? options.gt : undefined\n  const upper = options.lte !== undefined ? options.lte : options.lt !== undefined ? options.lt : undefined\n  const lowerExclusive = options.gte === undefined\n  const upperExclusive = options.lte === undefined\n\n  if (lower !== undefined && upper !== undefined) {\n    return IDBKeyRange.bound(lower, upper, lowerExclusive, upperExclusive)\n  } else if (lower !== undefined) {\n    return IDBKeyRange.lowerBound(lower, lowerExclusive)\n  } else if (upper !== undefined) {\n    return IDBKeyRange.upperBound(upper, upperExclusive)\n  } else {\n    return null\n  }\n}\n","'use strict'\n\nconst textEncoder = new TextEncoder()\n\nmodule.exports = function (data) {\n  if (data instanceof Uint8Array) {\n    return data\n  } else if (data instanceof ArrayBuffer) {\n    return new Uint8Array(data)\n  } else {\n    // Non-binary data stored with an old version (level-js < 5.0.0)\n    return textEncoder.encode(data)\n  }\n}\n","'use strict'\n\nconst { AbstractIterator } = require('abstract-level')\nconst createKeyRange = require('./util/key-range')\nconst deserialize = require('./util/deserialize')\n\nconst kCache = Symbol('cache')\nconst kFinished = Symbol('finished')\nconst kOptions = Symbol('options')\nconst kCurrentOptions = Symbol('currentOptions')\nconst kPosition = Symbol('position')\nconst kLocation = Symbol('location')\nconst kFirst = Symbol('first')\nconst emptyOptions = {}\n\nclass Iterator extends AbstractIterator {\n  constructor (db, location, options) {\n    super(db, options)\n\n    this[kCache] = []\n    this[kFinished] = this.limit === 0\n    this[kOptions] = options\n    this[kCurrentOptions] = { ...options }\n    this[kPosition] = undefined\n    this[kLocation] = location\n    this[kFirst] = true\n  }\n\n  // Note: if called by _all() then size can be Infinity. This is an internal\n  // detail; by design AbstractIterator.nextv() does not support Infinity.\n  _nextv (size, options, callback) {\n    this[kFirst] = false\n\n    if (this[kFinished]) {\n      return this.nextTick(callback, null, [])\n    } else if (this[kCache].length > 0) {\n      // TODO: mixing next and nextv is not covered by test suite\n      size = Math.min(size, this[kCache].length)\n      return this.nextTick(callback, null, this[kCache].splice(0, size))\n    }\n\n    // Adjust range by what we already visited\n    if (this[kPosition] !== undefined) {\n      if (this[kOptions].reverse) {\n        this[kCurrentOptions].lt = this[kPosition]\n        this[kCurrentOptions].lte = undefined\n      } else {\n        this[kCurrentOptions].gt = this[kPosition]\n        this[kCurrentOptions].gte = undefined\n      }\n    }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kCurrentOptions])\n    } catch (_) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just return 0 results.\n      this[kFinished] = true\n      return this.nextTick(callback, null, [])\n    }\n\n    const transaction = this.db.db.transaction([this[kLocation]], 'readonly')\n    const store = transaction.objectStore(this[kLocation])\n    const entries = []\n\n    if (!this[kOptions].reverse) {\n      let keys\n      let values\n\n      const complete = () => {\n        // Wait for both requests to complete\n        if (keys === undefined || values === undefined) return\n\n        const length = Math.max(keys.length, values.length)\n\n        if (length === 0 || size === Infinity) {\n          this[kFinished] = true\n        } else {\n          this[kPosition] = keys[length - 1]\n        }\n\n        // Resize\n        entries.length = length\n\n        // Merge keys and values\n        for (let i = 0; i < length; i++) {\n          const key = keys[i]\n          const value = values[i]\n\n          entries[i] = [\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ]\n        }\n\n        maybeCommit(transaction)\n      }\n\n      // If keys were not requested and size is Infinity, we don't have to keep\n      // track of position and can thus skip getting keys.\n      if (this[kOptions].keys || size < Infinity) {\n        store.getAllKeys(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          keys = ev.target.result\n          complete()\n        }\n      } else {\n        keys = []\n        this.nextTick(complete)\n      }\n\n      if (this[kOptions].values) {\n        store.getAll(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          values = ev.target.result\n          complete()\n        }\n      } else {\n        values = []\n        this.nextTick(complete)\n      }\n    } else {\n      // Can't use getAll() in reverse, so use a slower cursor that yields one item at a time\n      // TODO: test if all target browsers support openKeyCursor\n      const method = !this[kOptions].values && store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n\n      store[method](keyRange, 'prev').onsuccess = (ev) => {\n        const cursor = ev.target.result\n\n        if (cursor) {\n          const { key, value } = cursor\n          this[kPosition] = key\n\n          entries.push([\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ])\n\n          if (entries.length < size) {\n            cursor.continue()\n          } else {\n            maybeCommit(transaction)\n          }\n        } else {\n          this[kFinished] = true\n        }\n      }\n    }\n\n    // If an error occurs (on the request), the transaction will abort.\n    transaction.onabort = () => {\n      callback(transaction.error || new Error('aborted by user'))\n      callback = null\n    }\n\n    transaction.oncomplete = () => {\n      callback(null, entries)\n      callback = null\n    }\n  }\n\n  _next (callback) {\n    if (this[kCache].length > 0) {\n      const [key, value] = this[kCache].shift()\n      this.nextTick(callback, null, key, value)\n    } else if (this[kFinished]) {\n      this.nextTick(callback)\n    } else {\n      let size = Math.min(100, this.limit - this.count)\n\n      if (this[kFirst]) {\n        // It's common to only want one entry initially or after a seek()\n        this[kFirst] = false\n        size = 1\n      }\n\n      this._nextv(size, emptyOptions, (err, entries) => {\n        if (err) return callback(err)\n        this[kCache] = entries\n        this._next(callback)\n      })\n    }\n  }\n\n  _all (options, callback) {\n    this[kFirst] = false\n\n    // TODO: mixing next and all is not covered by test suite\n    const cache = this[kCache].splice(0, this[kCache].length)\n    const size = this.limit - this.count - cache.length\n\n    if (size <= 0) {\n      return this.nextTick(callback, null, cache)\n    }\n\n    this._nextv(size, emptyOptions, (err, entries) => {\n      if (err) return callback(err)\n      if (cache.length > 0) entries = cache.concat(entries)\n      callback(null, entries)\n    })\n  }\n\n  _seek (target, options) {\n    this[kFirst] = true\n    this[kCache] = []\n    this[kFinished] = false\n    this[kPosition] = undefined\n\n    // TODO: not covered by test suite\n    this[kCurrentOptions] = { ...this[kOptions] }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kOptions])\n    } catch (_) {\n      this[kFinished] = true\n      return\n    }\n\n    if (keyRange !== null && !keyRange.includes(target)) {\n      this[kFinished] = true\n    } else if (this[kOptions].reverse) {\n      this[kCurrentOptions].lte = target\n    } else {\n      this[kCurrentOptions].gte = target\n    }\n  }\n}\n\nexports.Iterator = Iterator\n\nfunction maybeCommit (transaction) {\n  // Commit (meaning close) now instead of waiting for auto-commit\n  if (typeof transaction.commit === 'function') {\n    transaction.commit()\n  }\n}\n","'use strict'\n\nmodule.exports = function clear (db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db.nextTick(callback)\n\n  const transaction = db.db.transaction([location], 'readwrite')\n  const store = transaction.objectStore(location)\n  let count = 0\n\n  transaction.oncomplete = function () {\n    callback()\n  }\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'))\n  }\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  // TODO: we no longer support IE. Test others\n  const method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n  const direction = options.reverse ? 'prev' : 'next'\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    const cursor = ev.target.result\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue()\n        }\n      }\n    }\n  }\n}\n","/* global indexedDB */\n\n'use strict'\n\nconst { AbstractLevel } = require('abstract-level')\nconst ModuleError = require('module-error')\nconst parallel = require('run-parallel-limit')\nconst { fromCallback } = require('catering')\nconst { Iterator } = require('./iterator')\nconst deserialize = require('./util/deserialize')\nconst clear = require('./util/clear')\nconst createKeyRange = require('./util/key-range')\n\n// Keep as-is for compatibility with existing level-js databases\nconst DEFAULT_PREFIX = 'level-js-'\n\nconst kIDB = Symbol('idb')\nconst kNamePrefix = Symbol('namePrefix')\nconst kLocation = Symbol('location')\nconst kVersion = Symbol('version')\nconst kStore = Symbol('store')\nconst kOnComplete = Symbol('onComplete')\nconst kPromise = Symbol('promise')\n\nclass BrowserLevel extends AbstractLevel {\n  constructor (location, options, _) {\n    // To help migrating to abstract-level\n    if (typeof options === 'function' || typeof _ === 'function') {\n      throw new ModuleError('The levelup-style callback argument has been removed', {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    const { prefix, version, ...forward } = options || {}\n\n    super({\n      encodings: { view: true },\n      snapshots: false,\n      createIfMissing: false,\n      errorIfExists: false,\n      seek: true\n    }, forward)\n\n    if (typeof location !== 'string') {\n      throw new Error('constructor requires a location string argument')\n    }\n\n    // TODO (next major): remove default prefix\n    this[kLocation] = location\n    this[kNamePrefix] = prefix == null ? DEFAULT_PREFIX : prefix\n    this[kVersion] = parseInt(version || 1, 10)\n    this[kIDB] = null\n  }\n\n  get location () {\n    return this[kLocation]\n  }\n\n  get namePrefix () {\n    return this[kNamePrefix]\n  }\n\n  get version () {\n    return this[kVersion]\n  }\n\n  // Exposed for backwards compat and unit tests\n  get db () {\n    return this[kIDB]\n  }\n\n  get type () {\n    return 'browser-level'\n  }\n\n  _open (options, callback) {\n    const req = indexedDB.open(this[kNamePrefix] + this[kLocation], this[kVersion])\n\n    req.onerror = function () {\n      callback(req.error || new Error('unknown error'))\n    }\n\n    req.onsuccess = () => {\n      this[kIDB] = req.result\n      callback()\n    }\n\n    req.onupgradeneeded = (ev) => {\n      const db = ev.target.result\n\n      if (!db.objectStoreNames.contains(this[kLocation])) {\n        db.createObjectStore(this[kLocation])\n      }\n    }\n  }\n\n  [kStore] (mode) {\n    const transaction = this[kIDB].transaction([this[kLocation]], mode)\n    return transaction.objectStore(this[kLocation])\n  }\n\n  [kOnComplete] (request, callback) {\n    const transaction = request.transaction\n\n    // Take advantage of the fact that a non-canceled request error aborts\n    // the transaction. I.e. no need to listen for \"request.onerror\".\n    transaction.onabort = function () {\n      callback(transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback(null, request.result)\n    }\n  }\n\n  _get (key, options, callback) {\n    const store = this[kStore]('readonly')\n    let req\n\n    try {\n      req = store.get(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, function (err, value) {\n      if (err) return callback(err)\n\n      if (value === undefined) {\n        return callback(new ModuleError('Entry not found', {\n          code: 'LEVEL_NOT_FOUND'\n        }))\n      }\n\n      callback(null, deserialize(value))\n    })\n  }\n\n  _getMany (keys, options, callback) {\n    const store = this[kStore]('readonly')\n    const tasks = keys.map((key) => (next) => {\n      let request\n\n      try {\n        request = store.get(key)\n      } catch (err) {\n        return next(err)\n      }\n\n      request.onsuccess = () => {\n        const value = request.result\n        next(null, value === undefined ? value : deserialize(value))\n      }\n\n      request.onerror = (ev) => {\n        ev.stopPropagation()\n        next(request.error)\n      }\n    })\n\n    parallel(tasks, 16, callback)\n  }\n\n  _del (key, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      req = store.delete(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _put (key, value, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      // Will throw a DataError or DataCloneError if the environment\n      // does not support serializing the key or value respectively.\n      req = store.put(value, key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  // TODO: implement key and value iterators\n  _iterator (options) {\n    return new Iterator(this, this[kLocation], options)\n  }\n\n  _batch (operations, options, callback) {\n    const store = this[kStore]('readwrite')\n    const transaction = store.transaction\n    let index = 0\n    let error\n\n    transaction.onabort = function () {\n      callback(error || transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback()\n    }\n\n    // Wait for a request to complete before making the next, saving CPU.\n    function loop () {\n      const op = operations[index++]\n      const key = op.key\n\n      let req\n\n      try {\n        req = op.type === 'del' ? store.delete(key) : store.put(op.value, key)\n      } catch (err) {\n        error = err\n        transaction.abort()\n        return\n      }\n\n      if (index < operations.length) {\n        req.onsuccess = loop\n      } else if (typeof transaction.commit === 'function') {\n        // Commit now instead of waiting for auto-commit\n        transaction.commit()\n      }\n    }\n\n    loop()\n  }\n\n  _clear (options, callback) {\n    let keyRange\n    let req\n\n    try {\n      keyRange = createKeyRange(options)\n    } catch (e) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just do nothing.\n      return this.nextTick(callback)\n    }\n\n    if (options.limit >= 0) {\n      // IDBObjectStore#delete(range) doesn't have such an option.\n      // Fall back to cursor-based implementation.\n      return clear(this, this[kLocation], keyRange, options, callback)\n    }\n\n    try {\n      const store = this[kStore]('readwrite')\n      req = keyRange ? store.delete(keyRange) : store.clear()\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _close (callback) {\n    this[kIDB].close()\n    this.nextTick(callback)\n  }\n}\n\nBrowserLevel.destroy = function (location, prefix, callback) {\n  if (typeof prefix === 'function') {\n    callback = prefix\n    prefix = DEFAULT_PREFIX\n  }\n\n  callback = fromCallback(callback, kPromise)\n  const request = indexedDB.deleteDatabase(prefix + location)\n\n  request.onsuccess = function () {\n    callback()\n  }\n\n  request.onerror = function (err) {\n    callback(err)\n  }\n\n  return callback[kPromise]\n}\n\nexports.BrowserLevel = BrowserLevel\n","exports.Level = require('browser-level').BrowserLevel\n"],"names":["global","textEndec","ModuleError","require$$0","formats","Encoding","Buffer","require$$1","require$$2","ViewFormat","BufferFormat","textEncoder","textDecoder","UTF8Format","encodings","buffer","require$$3","encoding","Transcoder","nextTickBrowser","promise","fromCallback","getOptions","getCallback","kPromise","kCallback","kHandleOne","kHandleMany","kCloseCallbacks","kKeyEncoding","kValueEncoding","emptyOptions","noop","err","AbstractIterator","AbstractKeyIterator","AbstractValueIterator","Iterator","DefaultKeyIterator","DefaultValueIterator","kUndefer","DeferredIterator","DeferredKeyIterator","DeferredValueIterator","kStatus","kOperations","AbstractChainedBatch","DefaultChainedBatch","rangeOptions","queueMicrotask","kIterator","iterator","AbstractLevel","AbstractSublevel","prefixLength","supports","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","kOptions","require$$11","require$$12","abstractLevel","result","deserialize","createKeyRange","kLocation","keyRange","clear"],"mappings":"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"}