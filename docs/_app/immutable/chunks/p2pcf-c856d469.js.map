{"version":3,"file":"p2pcf-c856d469.js","sources":["../../../../../../node_modules/get-browser-rtc/index.js","../../../../../../node_modules/events/events.js","../../../../../../node_modules/ms/index.js","../../../../../../node_modules/debug/src/common.js","../../../../../../node_modules/debug/src/browser.js","../../../../../../node_modules/random-string/lib/random-string.js","../../../../../../node_modules/queue-microtask/index.js","../../../../../../node_modules/err-code/index.js","../../../../../../node_modules/tiny-simple-peer/index.js","../../../../../../node_modules/base64-arraybuffer/dist/base64-arraybuffer.es5.js","../../../../../../node_modules/convert-hex/convert-hex.js","../../../../../../node_modules/array-buffer-to-hex/index.js","../../../../../../node_modules/p2pcf/src/p2pcf.js"],"sourcesContent":["// originally pulled out of simple-peer\n\nmodule.exports = function getBrowserRTC () {\n  if (typeof globalThis === 'undefined') return null\n  var wrtc = {\n    RTCPeerConnection: globalThis.RTCPeerConnection || globalThis.mozRTCPeerConnection ||\n      globalThis.webkitRTCPeerConnection,\n    RTCSessionDescription: globalThis.RTCSessionDescription ||\n      globalThis.mozRTCSessionDescription || globalThis.webkitRTCSessionDescription,\n    RTCIceCandidate: globalThis.RTCIceCandidate || globalThis.mozRTCIceCandidate ||\n      globalThis.webkitRTCIceCandidate\n  }\n  if (!wrtc.RTCPeerConnection) return null\n  return wrtc\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","/*\n * random-string\n * https://github.com/valiton/node-random-string\n *\n * Copyright (c) 2013 Valiton GmbH, Bastian 'hereandnow' Behrens\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar numbers = '0123456789',\n    letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n    specials = '!$%^&*()_+|~-=`{}[]:;<>?,./';\n\n\nfunction _defaults (opts) {\n  opts || (opts = {});\n  return {\n    length: opts.length || 8,\n    numeric: typeof opts.numeric === 'boolean' ? opts.numeric : true,\n    letters: typeof opts.letters === 'boolean' ? opts.letters : true,\n    special: typeof opts.special === 'boolean' ? opts.special : false,\n    exclude: Array.isArray(opts.exclude)       ? opts.exclude : []\n  };\n}\n\nfunction _buildChars (opts) {\n  var chars = '';\n  if (opts.numeric) { chars += numbers; }\n  if (opts.letters) { chars += letters; }\n  if (opts.special) { chars += specials; }\n  for (var i = 0; i <= opts.exclude.length; i++){\n    chars = chars.replace(opts.exclude[i], \"\");\n  }\n  return chars;\n}\n\nmodule.exports = function randomString(opts) {\n  opts = _defaults(opts);\n  var i, rn,\n      rnd = '',\n      len = opts.length,\n      exclude = opts.exclude,\n      randomChars = _buildChars(opts);\n  for (i = 1; i <= len; i++) {\n    rnd += randomChars.substring(rn = Math.floor(Math.random() * randomChars.length), rn + 1);\n  }\n  return rnd;\n};\n\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict';\n\n/**\n * @typedef {{ [key: string]: any }} Extensions\n * @typedef {Error} Err\n * @property {string} message\n */\n\n/**\n *\n * @param {Error} obj\n * @param {Extensions} props\n * @returns {Error & Extensions}\n */\nfunction assign(obj, props) {\n    for (const key in props) {\n        Object.defineProperty(obj, key, {\n            value: props[key],\n            enumerable: true,\n            configurable: true,\n        });\n    }\n\n    return obj;\n}\n\n/**\n *\n * @param {any} err - An Error\n * @param {string|Extensions} code - A string code or props to set on the error\n * @param {Extensions} [props] - Props to set on the error\n * @returns {Error & Extensions}\n */\nfunction createError(err, code, props) {\n    if (!err || typeof err === 'string') {\n        throw new TypeError('Please pass an Error to err-code');\n    }\n\n    if (!props) {\n        props = {};\n    }\n\n    if (typeof code === 'object') {\n        props = code;\n        code = '';\n    }\n\n    if (code) {\n        props.code = code;\n    }\n\n    try {\n        return assign(err, props);\n    } catch (_) {\n        props.message = err.message;\n        props.stack = err.stack;\n\n        const ErrClass = function () {};\n\n        ErrClass.prototype = Object.create(Object.getPrototypeOf(err));\n\n        // @ts-ignore\n        const output = assign(new ErrClass(), props);\n\n        return output;\n    }\n}\n\nmodule.exports = createError;\n","/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst debug = require('debug')('simple-peer')\nconst getBrowserRTC = require('get-browser-rtc')\nconst randomstring = require('random-string')\nconst queueMicrotask = require('queue-microtask')\nconst EventEmitter = require('events')\nconst errCode = require('err-code')\n\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\nconst ICECOMPLETE_TIMEOUT = 5 * 1000\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1000\n\n// HACK: Filter trickle lines when trickle is disabled #354\nfunction filterTrickle (sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, '')\n}\n\nfunction warn (message) {\n  console.warn(message)\n}\n\n/**\n * WebRTC peer connection. Same API as node core `net.Socket`, plus a few extra methods.\n * Duplex stream.\n * @param {Object} opts\n */\nclass Peer extends EventEmitter {\n  constructor (opts) {\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts)\n\n    super(opts)\n\n    this.id = opts.id || randomstring({ length: 20 })\n    this._debug('new peer %o', opts)\n\n    this.channelName = opts.initiator\n      ? opts.channelName || randomstring({ length: 20 })\n      : null\n\n    this.initiator = opts.initiator || false\n    this.channelConfig = opts.channelConfig || Peer.channelConfig\n    this.channelNegotiated = this.channelConfig.negotiated\n    this.config = Object.assign({}, Peer.config, opts.config)\n    this.proprietaryConstraints = Object.assign({}, Peer.proprietaryConstraints, opts.proprietaryConstraints)\n    this.offerOptions = opts.offerOptions || {}\n    this.answerOptions = opts.answerOptions || {}\n    this.sdpTransform = opts.sdpTransform || (sdp => sdp)\n    this.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old \"stream\" option\n    this.trickle = opts.trickle !== undefined ? opts.trickle : true\n    this.allowHalfTrickle = opts.allowHalfTrickle !== undefined ? opts.allowHalfTrickle : false\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT\n\n    this.destroyed = false\n    this.destroying = false\n    this._connected = false\n\n    this.remoteAddress = undefined\n    this.remoteFamily = undefined\n    this.remotePort = undefined\n    this.localAddress = undefined\n    this.localFamily = undefined\n    this.localPort = undefined\n\n    this._wrtc = (opts.wrtc && typeof opts.wrtc === 'object')\n      ? opts.wrtc\n      : getBrowserRTC()\n\n    if (!this._wrtc) {\n      if (typeof window === 'undefined') {\n        throw errCode(new Error('No WebRTC support: Specify `opts.wrtc` option in this environment'), 'ERR_WEBRTC_SUPPORT')\n      } else {\n        throw errCode(new Error('No WebRTC support: Not a supported browser'), 'ERR_WEBRTC_SUPPORT')\n      }\n    }\n\n    this._pcReady = false\n    this._channelReady = false\n    this._iceComplete = false // ice candidate trickle done (got null candidate)\n    this._iceCompleteTimer = null // send an offer/answer anyway after some timeout\n    this._channel = null\n    this._pendingCandidates = []\n\n    this._isNegotiating = false // is this peer waiting for negotiation to complete?\n    this._firstNegotiation = true\n    this._batchedNegotiation = false // batch synchronous negotiations\n    this._queuedNegotiation = false // is there a queued negotiation request?\n    this._sendersAwaitingStable = []\n    this._senderMap = new Map()\n    this._closingInterval = null\n\n    this._remoteTracks = []\n    this._remoteStreams = []\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    try {\n      this._pc = new (this._wrtc.RTCPeerConnection)(this.config, this.proprietaryConstraints)\n    } catch (err) {\n      this.destroy(errCode(err, 'ERR_PC_CONSTRUCTOR'))\n      return\n    }\n\n    // We prefer feature detection whenever possible, but sometimes that's not\n    // possible for certain implementations.\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === 'number'\n\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange()\n    }\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange()\n    }\n    this._pc.onicecandidate = event => {\n      this._onIceCandidate(event)\n    }\n\n    // HACK: Fix for odd Firefox behavior, see: https://github.com/feross/simple-peer/pull/783\n    if (typeof this._pc.peerIdentity === 'object') {\n      this._pc.peerIdentity.catch(err => {\n        this.destroy(errCode(err, 'ERR_PC_PEER_IDENTITY'))\n      })\n    }\n\n    // Other spec events, unused by this implementation:\n    // - onconnectionstatechange\n    // - onicecandidateerror\n    // - onfingerprintfailure\n    // - onnegotiationneeded\n\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(this.channelName, this.channelConfig)\n      })\n    } else {\n      this._pc.ondatachannel = event => {\n        this._setupData(event)\n      }\n    }\n\n    if (this.streams) {\n      this.streams.forEach(stream => {\n        this.addStream(stream)\n      })\n    }\n    this._pc.ontrack = event => {\n      this._onTrack(event)\n    }\n\n    this._debug('initial negotiation')\n    this._needsNegotiation()\n\n    this._onFinishBound = () => {\n      this._onFinish()\n    }\n    this.once('finish', this._onFinishBound)\n  }\n\n  get bufferSize () {\n    return (this._channel && this._channel.bufferedAmount) || 0\n  }\n\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected () {\n    return (this._connected && this._channel.readyState === 'open')\n  }\n\n  address () {\n    return { port: this.localPort, family: this.localFamily, address: this.localAddress }\n  }\n\n  signal (data) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot signal after peer is destroyed'), 'ERR_DESTROYED')\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (err) {\n        data = {}\n      }\n    }\n    this._debug('signal()')\n\n    if (data.renegotiate && this.initiator) {\n      this._debug('got request to renegotiate')\n      this._needsNegotiation()\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug('got request for transceiver')\n      this.addTransceiver(data.transceiverRequest.kind, data.transceiverRequest.init)\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate)\n      } else {\n        this._pendingCandidates.push(data.candidate)\n      }\n    }\n    if (data.sdp) {\n      this._pc.setRemoteDescription(new (this._wrtc.RTCSessionDescription)(data))\n        .then(() => {\n          if (this.destroyed) return\n\n          this._pendingCandidates.forEach(candidate => {\n            this._addIceCandidate(candidate)\n          })\n          this._pendingCandidates = []\n\n          if (this._pc.remoteDescription.type === 'offer') this._createAnswer()\n        })\n        .catch(err => {\n          this.destroy(errCode(err, 'ERR_SET_REMOTE_DESCRIPTION'))\n        })\n    }\n    if (!data.sdp && !data.candidate && !data.renegotiate && !data.transceiverRequest) {\n      this.destroy(errCode(new Error('signal() called with invalid signal data'), 'ERR_SIGNALING'))\n    }\n  }\n\n  _addIceCandidate (candidate) {\n    const iceCandidateObj = new this._wrtc.RTCIceCandidate(candidate)\n    this._pc.addIceCandidate(iceCandidateObj)\n      .catch(err => {\n        if (!iceCandidateObj.address || iceCandidateObj.address.endsWith('.local')) {\n          warn('Ignoring unsupported ICE candidate.')\n        } else {\n          this.destroy(errCode(err, 'ERR_ADD_ICE_CANDIDATE'))\n        }\n      })\n  }\n\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|Buffer|string|Blob} chunk\n   */\n  send (chunk) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot send after peer is destroyed'), 'ERR_DESTROYED')\n    this._channel.send(chunk)\n  }\n\n  /**\n   * Add a Transceiver to the connection.\n   * @param {String} kind\n   * @param {Object} init\n   */\n  addTransceiver (kind, init) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTransceiver after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTransceiver()')\n\n    if (this.initiator) {\n      try {\n        this._pc.addTransceiver(kind, init)\n        this._needsNegotiation()\n      } catch (err) {\n        this.destroy(errCode(err, 'ERR_ADD_TRANSCEIVER'))\n      }\n    } else {\n      this.emit('signal', { // request initiator to renegotiate\n        type: 'transceiverRequest',\n        transceiverRequest: { kind, init }\n      })\n    }\n  }\n\n  /**\n   * Add a MediaStream to the connection.\n   * @param {MediaStream} stream\n   */\n  addStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addStream()')\n\n    stream.getTracks().forEach(track => {\n      this.addTrack(track, stream)\n    })\n  }\n\n  /**\n   * Add a MediaStreamTrack to the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  addTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTrack()')\n\n    const submap = this._senderMap.get(track) || new Map() // nested Maps map [track, stream] to sender\n    let sender = submap.get(stream)\n    if (!sender) {\n      sender = this._pc.addTrack(track, stream)\n      submap.set(stream, sender)\n      this._senderMap.set(track, submap)\n      this._needsNegotiation()\n    } else if (sender.removed) {\n      throw errCode(new Error('Track has been removed. You should enable/disable tracks that you want to re-add.'), 'ERR_SENDER_REMOVED')\n    } else {\n      throw errCode(new Error('Track has already been added to that stream.'), 'ERR_SENDER_ALREADY_ADDED')\n    }\n  }\n\n  /**\n   * Replace a MediaStreamTrack by another in the connection.\n   * @param {MediaStreamTrack} oldTrack\n   * @param {MediaStreamTrack} newTrack\n   * @param {MediaStream} stream\n   */\n  replaceTrack (oldTrack, newTrack, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot replaceTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('replaceTrack()')\n\n    const submap = this._senderMap.get(oldTrack)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot replace track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    if (newTrack) this._senderMap.set(newTrack, submap)\n\n    if (sender.replaceTrack != null) {\n      sender.replaceTrack(newTrack)\n    } else {\n      this.destroy(errCode(new Error('replaceTrack is not supported in this browser'), 'ERR_UNSUPPORTED_REPLACETRACK'))\n    }\n  }\n\n  /**\n   * Remove a MediaStreamTrack from the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  removeTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSender()')\n\n    const submap = this._senderMap.get(track)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot remove track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    try {\n      sender.removed = true\n      this._pc.removeTrack(sender)\n    } catch (err) {\n      if (err.name === 'NS_ERROR_UNEXPECTED') {\n        this._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874\n      } else {\n        this.destroy(errCode(err, 'ERR_REMOVE_TRACK'))\n      }\n    }\n    this._needsNegotiation()\n  }\n\n  /**\n   * Remove a MediaStream from the connection.\n   * @param {MediaStream} stream\n   */\n  removeStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSenders()')\n\n    stream.getTracks().forEach(track => {\n      this.removeTrack(track, stream)\n    })\n  }\n\n  _needsNegotiation () {\n    this._debug('_needsNegotiation')\n    if (this._batchedNegotiation) return // batch synchronous renegotiations\n    this._batchedNegotiation = true\n    queueMicrotask(() => {\n      this._batchedNegotiation = false\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug('starting batched negotiation')\n        this.negotiate()\n      } else {\n        this._debug('non-initiator initial negotiation request discarded')\n      }\n      this._firstNegotiation = false\n    })\n  }\n\n  negotiate () {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot negotiate after peer is destroyed'), 'ERR_DESTROYED')\n\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('start negotiation')\n        setTimeout(() => { // HACK: Chrome crashes if we immediately call createOffer\n          this._createOffer()\n        }, 0)\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('requesting negotiation from initiator')\n        this.emit('signal', { // request initiator to renegotiate\n          type: 'renegotiate',\n          renegotiate: true\n        })\n      }\n    }\n    this._isNegotiating = true\n  }\n\n  destroy (err) {\n    this._destroy(err, () => {})\n  }\n\n  _destroy (err, cb) {\n    if (this.destroyed || this.destroying) return\n    this.destroying = true\n\n    this._debug('destroying (error: %s)', err && (err.message || err))\n\n    queueMicrotask(() => { // allow events concurrent with the call to _destroy() to fire (see #692)\n      this.destroyed = true\n      this.destroying = false\n\n      this._debug('destroy (error: %s)', err && (err.message || err))\n\n      this._connected = false\n      this._pcReady = false\n      this._channelReady = false\n      this._remoteTracks = null\n      this._remoteStreams = null\n      this._senderMap = null\n\n      clearInterval(this._closingInterval)\n      this._closingInterval = null\n\n      clearInterval(this._interval)\n      this._interval = null\n      this._chunk = null\n      this._cb = null\n\n      if (this._onFinishBound) this.removeListener('finish', this._onFinishBound)\n      this._onFinishBound = null\n\n      if (this._channel) {\n        try {\n          this._channel.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._channel.onmessage = null\n        this._channel.onopen = null\n        this._channel.onclose = null\n        this._channel.onerror = null\n      }\n      if (this._pc) {\n        try {\n          this._pc.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._pc.oniceconnectionstatechange = null\n        this._pc.onicegatheringstatechange = null\n        this._pc.onsignalingstatechange = null\n        this._pc.onicecandidate = null\n        this._pc.ontrack = null\n        this._pc.ondatachannel = null\n      }\n      this._pc = null\n      this._channel = null\n\n      if (err) this.emit('error', err)\n      this.emit('close')\n      cb()\n    })\n  }\n\n  _setupData (event) {\n    if (!event.channel) {\n      // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),\n      // which is invalid behavior. Handle it gracefully.\n      // See: https://github.com/feross/simple-peer/issues/163\n      return this.destroy(errCode(new Error('Data channel event is missing `channel` property'), 'ERR_DATA_CHANNEL'))\n    }\n\n    this._channel = event.channel\n    this._channel.binaryType = 'arraybuffer'\n\n    if (typeof this._channel.bufferedAmountLowThreshold === 'number') {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT\n    }\n\n    this.channelName = this._channel.label\n\n    this._channel.onmessage = event => {\n      this._onChannelMessage(event)\n    }\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow()\n    }\n    this._channel.onopen = () => {\n      this._onChannelOpen()\n    }\n    this._channel.onclose = () => {\n      this._onChannelClose()\n    }\n    this._channel.onerror = event => {\n      const err = event.error instanceof Error\n        ? event.error\n        : new Error(`Datachannel error: ${event.message} ${event.filename}:${event.lineno}:${event.colno}`)\n      this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n    }\n\n    // HACK: Chrome will sometimes get stuck in readyState \"closing\", let's check for this condition\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n    let isClosing = false\n    this._closingInterval = setInterval(() => { // No \"onclosing\" event\n      if (this._channel && this._channel.readyState === 'closing') {\n        if (isClosing) this._onChannelClose() // closing timed out: equivalent to onclose firing\n        isClosing = true\n      } else {\n        isClosing = false\n      }\n    }, CHANNEL_CLOSING_TIMEOUT)\n  }\n\n  _read () {}\n\n  _write (chunk, encoding, cb) {\n    if (this.destroyed) return cb(errCode(new Error('cannot write after peer is destroyed'), 'ERR_DATA_CHANNEL'))\n\n    if (this._connected) {\n      try {\n        this.send(chunk)\n      } catch (err) {\n        return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n      }\n      if (this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug('start backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n        this._cb = cb\n      } else {\n        cb(null)\n      }\n    } else {\n      this._debug('write before connect')\n      this._chunk = chunk\n      this._cb = cb\n    }\n  }\n\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish () {\n    if (this.destroyed) return\n\n    // Wait a bit before destroying so the socket flushes.\n    // TODO: is there a more reliable way to accomplish this?\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1000)\n    }\n\n    if (this._connected) {\n      destroySoon()\n    } else {\n      this.once('connect', destroySoon)\n    }\n  }\n\n  _startIceCompleteTimeout () {\n    if (this.destroyed) return\n    if (this._iceCompleteTimer) return\n    this._debug('started iceComplete timeout')\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true\n        this._debug('iceComplete timeout completed')\n        this.emit('iceTimeout')\n        this.emit('_iceComplete')\n      }\n    }, this.iceCompleteTimeout)\n  }\n\n  _createOffer () {\n    if (this.destroyed) return\n\n    this._pc.createOffer(this.offerOptions)\n      .then(offer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) offer.sdp = filterTrickle(offer.sdp)\n        offer.sdp = this.sdpTransform(offer.sdp)\n\n        const sendOffer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || offer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n        }\n\n        const onSuccess = () => {\n          this._debug('createOffer success')\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendOffer()\n          else this.once('_iceComplete', sendOffer) // wait for candidates\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(offer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_OFFER'))\n      })\n  }\n\n  _requestMissingTransceivers () {\n    if (this._pc.getTransceivers) {\n      this._pc.getTransceivers().forEach(transceiver => {\n        if (!transceiver.mid && transceiver.sender.track && !transceiver.requested) {\n          transceiver.requested = true // HACK: Safari returns negotiated transceivers with a null mid\n          this.addTransceiver(transceiver.sender.track.kind)\n        }\n      })\n    }\n  }\n\n  _createAnswer () {\n    if (this.destroyed) return\n\n    this._pc.createAnswer(this.answerOptions)\n      .then(answer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) answer.sdp = filterTrickle(answer.sdp)\n        answer.sdp = this.sdpTransform(answer.sdp)\n\n        const sendAnswer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || answer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n          if (!this.initiator) this._requestMissingTransceivers()\n        }\n\n        const onSuccess = () => {\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendAnswer()\n          else this.once('_iceComplete', sendAnswer)\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(answer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_ANSWER'))\n      })\n  }\n\n  _onConnectionStateChange () {\n    if (this.destroyed) return\n    if (this._pc.connectionState === 'failed') {\n      this.destroy(errCode(new Error('Connection failed.'), 'ERR_CONNECTION_FAILURE'))\n    }\n  }\n\n  _onIceStateChange () {\n    if (this.destroyed) return\n    const iceConnectionState = this._pc.iceConnectionState\n    const iceGatheringState = this._pc.iceGatheringState\n\n    this._debug(\n      'iceStateChange (connection: %s) (gathering: %s)',\n      iceConnectionState,\n      iceGatheringState\n    )\n    this.emit('iceStateChange', iceConnectionState, iceGatheringState)\n\n    if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {\n      this._pcReady = true\n      this._maybeReady()\n    }\n    if (iceConnectionState === 'failed') {\n      this.destroy(errCode(new Error('Ice connection failed.'), 'ERR_ICE_CONNECTION_FAILURE'))\n    }\n    if (iceConnectionState === 'closed') {\n      this.destroy(errCode(new Error('Ice connection closed.'), 'ERR_ICE_CONNECTION_CLOSED'))\n    }\n  }\n\n  getStats (cb) {\n    // statreports can come with a value array instead of properties\n    const flattenValues = report => {\n      if (Object.prototype.toString.call(report.values) === '[object Array]') {\n        report.values.forEach(value => {\n          Object.assign(report, value)\n        })\n      }\n      return report\n    }\n\n    // Promise-based getStats() (standard)\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats()\n        .then(res => {\n          const reports = []\n          res.forEach(report => {\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        }, err => cb(err))\n\n    // Single-parameter callback-based getStats() (non-standard)\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats(res => {\n        // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed\n        if (this.destroyed) return\n\n        const reports = []\n        res.result().forEach(result => {\n          const report = {}\n          result.names().forEach(name => {\n            report[name] = result.stat(name)\n          })\n          report.id = result.id\n          report.type = result.type\n          report.timestamp = result.timestamp\n          reports.push(flattenValues(report))\n        })\n        cb(null, reports)\n      }, err => cb(err))\n\n    // Unknown browser, skip getStats() since it's anyone's guess which style of\n    // getStats() they implement.\n    } else {\n      cb(null, [])\n    }\n  }\n\n  _maybeReady () {\n    this._debug('maybeReady pc %s channel %s', this._pcReady, this._channelReady)\n    if (this._connected || this._connecting || !this._pcReady || !this._channelReady) return\n\n    this._connecting = true\n\n    // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339\n    const findCandidatePair = () => {\n      if (this.destroyed) return\n\n      this.getStats((err, items) => {\n        if (this.destroyed) return\n\n        // Treat getStats error as non-fatal. It's not essential.\n        if (err) items = []\n\n        const remoteCandidates = {}\n        const localCandidates = {}\n        const candidatePairs = {}\n        let foundSelectedCandidatePair = false\n\n        items.forEach(item => {\n          // TODO: Once all browsers support the hyphenated stats report types, remove\n          // the non-hypenated ones\n          if (item.type === 'remotecandidate' || item.type === 'remote-candidate') {\n            remoteCandidates[item.id] = item\n          }\n          if (item.type === 'localcandidate' || item.type === 'local-candidate') {\n            localCandidates[item.id] = item\n          }\n          if (item.type === 'candidatepair' || item.type === 'candidate-pair') {\n            candidatePairs[item.id] = item\n          }\n        })\n\n        const setSelectedCandidatePair = selectedCandidatePair => {\n          foundSelectedCandidatePair = true\n\n          let local = localCandidates[selectedCandidatePair.localCandidateId]\n\n          if (local && (local.ip || local.address)) {\n            // Spec\n            this.localAddress = local.ip || local.address\n            this.localPort = Number(local.port)\n          } else if (local && local.ipAddress) {\n            // Firefox\n            this.localAddress = local.ipAddress\n            this.localPort = Number(local.portNumber)\n          } else if (typeof selectedCandidatePair.googLocalAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            local = selectedCandidatePair.googLocalAddress.split(':')\n            this.localAddress = local[0]\n            this.localPort = Number(local[1])\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          let remote = remoteCandidates[selectedCandidatePair.remoteCandidateId]\n\n          if (remote && (remote.ip || remote.address)) {\n            // Spec\n            this.remoteAddress = remote.ip || remote.address\n            this.remotePort = Number(remote.port)\n          } else if (remote && remote.ipAddress) {\n            // Firefox\n            this.remoteAddress = remote.ipAddress\n            this.remotePort = Number(remote.portNumber)\n          } else if (typeof selectedCandidatePair.googRemoteAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            remote = selectedCandidatePair.googRemoteAddress.split(':')\n            this.remoteAddress = remote[0]\n            this.remotePort = Number(remote[1])\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          this._debug(\n            'connect local: %s:%s remote: %s:%s',\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          )\n        }\n\n        items.forEach(item => {\n          // Spec-compliant\n          if (item.type === 'transport' && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId])\n          }\n\n          // Old implementations\n          if (\n            (item.type === 'googCandidatePair' && item.googActiveConnection === 'true') ||\n            ((item.type === 'candidatepair' || item.type === 'candidate-pair') && item.selected)\n          ) {\n            setSelectedCandidatePair(item)\n          }\n        })\n\n        // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates\n        // But wait until at least 1 candidate pair is available\n        if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {\n          setTimeout(findCandidatePair, 100)\n          return\n        } else {\n          this._connecting = false\n          this._connected = true\n        }\n\n        if (this._chunk) {\n          try {\n            this.send(this._chunk)\n          } catch (err) {\n            return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n          }\n          this._chunk = null\n          this._debug('sent chunk from \"write before connect\"')\n\n          const cb = this._cb\n          this._cb = null\n          cb(null)\n        }\n\n        // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,\n        // fallback to using setInterval to implement backpressure.\n        if (typeof this._channel.bufferedAmountLowThreshold !== 'number') {\n          this._interval = setInterval(() => this._onInterval(), 150)\n          if (this._interval.unref) this._interval.unref()\n        }\n\n        this._debug('connect')\n        this.emit('connect')\n      })\n    }\n    findCandidatePair()\n  }\n\n  _onInterval () {\n    if (!this._cb || !this._channel || this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return\n    }\n    this._onChannelBufferedAmountLow()\n  }\n\n  _onSignalingStateChange () {\n    if (this.destroyed) return\n\n    if (this._pc.signalingState === 'stable') {\n      this._isNegotiating = false\n\n      // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'\n      this._debug('flushing sender queue', this._sendersAwaitingStable)\n      this._sendersAwaitingStable.forEach(sender => {\n        this._pc.removeTrack(sender)\n        this._queuedNegotiation = true\n      })\n      this._sendersAwaitingStable = []\n\n      if (this._queuedNegotiation) {\n        this._debug('flushing negotiation queue')\n        this._queuedNegotiation = false\n        this._needsNegotiation() // negotiate again\n      } else {\n        this._debug('negotiated')\n        this.emit('negotiated')\n      }\n    }\n\n    this._debug('signalingStateChange %s', this._pc.signalingState)\n    this.emit('signalingStateChange', this._pc.signalingState)\n  }\n\n  _onIceCandidate (event) {\n    if (this.destroyed) return\n    if (event.candidate && this.trickle) {\n      this.emit('signal', {\n        type: 'candidate',\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      })\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true\n      this.emit('_iceComplete')\n    }\n    // as soon as we've received one valid candidate start timeout\n    if (event.candidate) {\n      this._startIceCompleteTimeout()\n    }\n  }\n\n  _onChannelMessage (event) {\n    if (this.destroyed) return\n    this.emit('data', event.data)\n  }\n\n  _onChannelBufferedAmountLow () {\n    if (this.destroyed || !this._cb) return\n    this._debug('ending backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onChannelOpen () {\n    if (this._connected || this.destroyed) return\n    this._debug('on channel open')\n    this._channelReady = true\n    this._maybeReady()\n  }\n\n  _onChannelClose () {\n    if (this.destroyed) return\n    this._debug('on channel close')\n    this.destroy()\n  }\n\n  _onTrack (event) {\n    if (this.destroyed) return\n    const { track, receiver, streams } = event\n\n    streams.forEach(eventStream => {\n      this._debug('on track')\n      this.emit('track', track, eventStream, receiver)\n\n      this._remoteTracks.push({ track, stream: eventStream })\n\n      if (this._remoteStreams.some(remoteStream => {\n        return remoteStream.id === eventStream.id\n      })) return // Only fire one 'stream' event, even though there may be multiple tracks per stream\n\n      this._remoteStreams.push(eventStream)\n      queueMicrotask(() => {\n        this._debug('on stream')\n        this.emit('stream', eventStream, receiver) // ensure all tracks have been added\n      })\n    })\n  }\n\n  _debug () {\n    const args = [].slice.call(arguments)\n    args[0] = '[' + this.id + '] ' + args[0]\n    debug.apply(null, args)\n  }\n}\n\nPeer.WEBRTC_SUPPORT = !!getBrowserRTC()\n\n/**\n * Expose peer and data channel config for overriding all Peer\n * instances. Otherwise, just set opts.config or opts.channelConfig\n * when constructing a Peer.\n */\nPeer.config = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:global.stun.twilio.com:3478'\n      ]\n    }\n  ],\n  sdpSemantics: 'unified-plan'\n}\n\nPeer.channelConfig = {}\nPeer.proprietaryConstraints = {}\n\nmodule.exports = Peer\n","/*\n * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n//# sourceMappingURL=base64-arraybuffer.es5.js.map\n","!function(globals) {\n'use strict'\n\nvar convertHex = {\n  bytesToHex: function(bytes) {\n    /*if (typeof bytes.byteLength != 'undefined') {\n      var newBytes = []\n\n      if (typeof bytes.buffer != 'undefined')\n        bytes = new DataView(bytes.buffer)\n      else\n        bytes = new DataView(bytes)\n\n      for (var i = 0; i < bytes.byteLength; ++i) {\n        newBytes.push(bytes.getUint8(i))\n      }\n      bytes = newBytes\n    }*/\n    return arrBytesToHex(bytes)\n  },\n  hexToBytes: function(hex) {\n    if (hex.length % 2 === 1) throw new Error(\"hexToBytes can't have a string with an odd number of characters.\")\n    if (hex.indexOf('0x') === 0) hex = hex.slice(2)\n    return hex.match(/../g).map(function(x) { return parseInt(x,16) })\n  }\n}\n\n\n// PRIVATE\n\nfunction arrBytesToHex(bytes) {\n  return bytes.map(function(x) { return padLeft(x.toString(16),2) }).join('')\n}\n\nfunction padLeft(orig, len) {\n  if (orig.length > len) return orig\n  return Array(len - orig.length + 1).join('0') + orig\n}\n\n\nif (typeof module !== 'undefined' && module.exports) { //CommonJS\n  module.exports = convertHex\n} else {\n  globals.convertHex = convertHex\n}\n\n}(this);","module.exports = function arrayBufferToHex (arrayBuffer) {\n  if (typeof arrayBuffer !== 'object' || arrayBuffer === null || typeof arrayBuffer.byteLength !== 'number') {\n    throw new TypeError('Expected input to be an ArrayBuffer')\n  }\n\n  var view = new Uint8Array(arrayBuffer)\n  var result = ''\n  var value\n\n  for (var i = 0; i < view.length; i++) {\n    value = view[i].toString(16)\n    result += (value.length === 1 ? '0' + value : value)\n  }\n\n  return result\n}\n","/**\n * Peer 2 Peer WebRTC connections with Cloudflare Workers as signalling server\n * Copyright Greg Fodor <gfodor@gmail.com>\n * Licensed under MIT\n */\n\n/* global crypto */\n\nimport getBrowserRTC from 'get-browser-rtc'\nimport EventEmitter from 'events'\nimport Peer from 'tiny-simple-peer'\nimport {\n  encode as arrayBufferToBase64,\n  decode as base64ToArrayBuffer\n} from 'base64-arraybuffer'\nimport { hexToBytes } from 'convert-hex'\nimport arrayBufferToHex from 'array-buffer-to-hex'\n\nconst CONNECT_TIMEOUT = 15000\n\n// Based on Chrome\nconst MAX_MESSAGE_LENGTH_BYTES = 16000\n\nconst CHUNK_HEADER_LENGTH_BYTES = 12 // 2 magic, 2 msg id, 2 chunk id, 2 for done bit, 4 for length\nconst CHUNK_MAGIC_WORD = 8121\nconst CHUNK_MAX_LENGTH_BYTES =\n  MAX_MESSAGE_LENGTH_BYTES - CHUNK_HEADER_LENGTH_BYTES\n\n// Signalling messages have a 64-bit unique header\nconst SIGNAL_MESSAGE_HEADER_WORDS = [0x82ab, 0x81cd, 0x1295, 0xa1cb]\n\nconst CANDIDATE_TYPES = {\n  host: 0,\n  srflx: 1,\n  relay: 2\n}\n\nconst CANDIDATE_TCP_TYPES = {\n  active: 0,\n  passive: 1,\n  so: 2\n}\n\nconst CANDIDATE_IDX = {\n  TYPE: 0,\n  PROTOCOL: 1,\n  IP: 2,\n  PORT: 3,\n  RELATED_IP: 4,\n  RELATED_PORT: 5,\n  TCP_TYPE: 6\n}\n\nconst DEFAULT_STUN_ICE = [\n  { urls: 'stun:stun1.l.google.com:19302' },\n  { urls: 'stun:global.stun.twilio.com:3478' }\n]\n\nconst DEFAULT_TURN_ICE = [\n  {\n    urls: 'turn:openrelay.metered.ca:80',\n    username: 'openrelayproject',\n    credential: 'openrelayproject'\n  },\n  {\n    urls: 'turn:openrelay.metered.ca:443',\n    username: 'openrelayproject',\n    credential: 'openrelayproject'\n  },\n  {\n    urls: 'turn:openrelay.metered.ca:443?transport=tcp',\n    username: 'openrelayproject',\n    credential: 'openrelayproject'\n  }\n]\n\nconst randomstring = len => {\n  const bytes = crypto.getRandomValues(new Uint8Array(len))\n  const str = bytes.reduce((accum, v) => accum + String.fromCharCode(v), '')\n  return btoa(str).replaceAll('=', '')\n}\n\nconst textDecoder = new TextDecoder('utf-8')\nconst textEncoder = new TextEncoder()\n\nconst arrToText = textDecoder.decode.bind(textDecoder)\nconst textToArr = textEncoder.encode.bind(textEncoder)\n\nconst removeInPlace = (a, condition) => {\n  let i = 0; let j = 0\n\n  while (i < a.length) {\n    const val = a[i]\n    if (!condition(val, i, a)) a[j++] = val\n    i++\n  }\n\n  a.length = j\n  return a\n}\n\nconst ua = window.navigator.userAgent\nconst iOS = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i)\nconst webkit = !!ua.match(/WebKit/i)\nconst iOSSafari = !!(iOS && webkit && !ua.match(/CriOS/i))\nconst isFirefox = !!(navigator?.userAgent.toLowerCase().indexOf('firefox') > -1)\n\nconst hexToBase64 = hex => arrayBufferToBase64(hexToBytes(hex))\nconst base64ToHex = b64 => arrayBufferToHex(base64ToArrayBuffer(b64))\n\nfunction createSdp (isOffer, iceUFrag, icePwd, dtlsFingerprintBase64) {\n  const dtlsHex = base64ToHex(dtlsFingerprintBase64)\n  let dtlsFingerprint = ''\n\n  for (let i = 0; i < dtlsHex.length; i += 2) {\n    dtlsFingerprint += `${dtlsHex[i]}${dtlsHex[i + 1]}${\n      i === dtlsHex.length - 2 ? '' : ':'\n    }`.toUpperCase()\n  }\n\n  const sdp = [\n    'v=0',\n    'o=- 5498186869896684180 2 IN IP4 127.0.0.1',\n    's=-',\n    't=0 0',\n    'a=msid-semantic: WMS',\n    'm=application 9 UDP/DTLS/SCTP webrtc-datachannel',\n    'c=IN IP4 0.0.0.0',\n    'a=mid:0',\n    'a=sctp-port:5000'\n  ]\n\n  if (isOffer) {\n    sdp.push('a=setup:actpass')\n  } else {\n    sdp.push('a=setup:active')\n  }\n\n  sdp.push(`a=ice-ufrag:${iceUFrag}`)\n  sdp.push(`a=ice-pwd:${icePwd}`)\n  sdp.push(`a=fingerprint:sha-256 ${dtlsFingerprint}`)\n\n  return sdp.join('\\r\\n') + '\\r\\n'\n}\n\n// parseCandidate from https://github.com/fippo/sdp\nconst parseCandidate = line => {\n  let parts\n\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ')\n  } else {\n    parts = line.substring(10).split(' ')\n  }\n\n  const candidate = [\n    CANDIDATE_TYPES[parts[7]], // type\n    parts[2].toLowerCase() === 'udp' ? 0 : 1, // protocol\n    parts[4], // ip\n    parseInt(parts[5], 10) // port\n  ]\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        while (candidate.length < 5) candidate.push(null)\n        candidate[4] = parts[i + 1]\n        break\n      case 'rport':\n        while (candidate.length < 6) candidate.push(null)\n        candidate[5] = parseInt(parts[i + 1], 10)\n        break\n      case 'tcptype':\n        while (candidate.length < 7) candidate.push(null)\n        candidate[6] = CANDIDATE_TCP_TYPES[parts[i + 1]]\n        break\n      default:\n        // Unknown extensions are silently ignored.\n        break\n    }\n  }\n\n  while (candidate.length < 8) candidate.push(null)\n  candidate[7] = parseInt(parts[3], 10) // Priority last\n\n  return candidate\n}\n\nexport default class P2PCF extends EventEmitter {\n  constructor (clientId = '', roomId = '', options = {}) {\n    super()\n\n    if (!clientId || clientId.length < 4) {\n      throw new Error('Client ID must be at least four characters')\n    }\n\n    if (!roomId || roomId.length < 4) {\n      throw new Error('Room ID must be at least four characters')\n    }\n\n    this._step = this._step.bind(this)\n\n    this.peers = new Map()\n    this.msgChunks = new Map()\n    this.connectedSessions = []\n    this.clientId = clientId\n    this.roomId = roomId\n    this.sessionId = randomstring(20)\n    this.packages = []\n    this.dataTimestamp = null\n    this.lastPackages = null\n    this.lastProcessedReceivedDataTimestamps = new Map()\n    this.packageReceivedFromPeers = new Set()\n    this.startedAtTimestamp = null\n    this.peerOptions = options.rtcPeerConnectionOptions || {}\n    this.peerProprietaryConstraints = options.rtcPeerConnectionProprietaryConstraints || {}\n    this.peerSdpTransform = options.sdpTransform || ((sdp) => sdp)\n\n    this.workerUrl = options.workerUrl || 'https://p2pcf.minddrop.workers.dev'\n\n    if (this.workerUrl.endsWith('/')) {\n      this.workerUrl = this.workerUrl.substring(0, this.workerUrl.length - 1)\n    }\n\n    this.stunIceServers = options.stunIceServers || DEFAULT_STUN_ICE\n    this.turnIceServers = options.turnIceServers || DEFAULT_TURN_ICE\n    this.networkChangePollIntervalMs =\n      options.networkChangePollIntervalMs || 15000\n\n    this.stateExpirationIntervalMs =\n      options.stateExpirationIntervalMs || 2 * 60 * 1000\n    this.stateHeartbeatWindowMs = options.stateHeartbeatWindowMs || 30000\n\n    this.fastPollingDurationMs = options.fastPollingDurationMs || 10000\n    this.fastPollingRateMs = options.fastPollingRateMs || 750\n    this.slowPollingRateMs = options.slowPollingRateMs || 1500\n\n    this.wrtc = getBrowserRTC()\n    this.dtlsCert = null\n    this.udpEnabled = null\n    this.isSymmetric = null\n    this.dtlsFingerprint = null\n    this.reflexiveIps = new Set()\n\n    // step\n    this.isSending = false\n    this.finished = false\n    this.nextStepTime = -1\n    this.deleteKey = null\n    this.sentFirstPoll = false\n    this.stopFastPollingAt = -1\n\n    // ContextID is maintained across page refreshes\n    if (!window.history.state?._p2pcfContextId) {\n      window.history.replaceState(\n        {\n          ...window.history.state,\n          _p2pcfContextId: randomstring(20)\n        },\n        window.location.href\n      )\n    }\n\n    this.contextId = window.history.state._p2pcfContextId\n  }\n\n  async _init () {\n    if (this.dtlsCert === null) {\n      this.dtlsCert = await this.wrtc.RTCPeerConnection.generateCertificate({\n        name: 'ECDSA',\n        namedCurve: 'P-256'\n      })\n    }\n  }\n\n  async _step (finish = false) {\n    const {\n      sessionId,\n      clientId,\n      roomId,\n      contextId,\n      stateExpirationIntervalMs,\n      stateHeartbeatWindowMs,\n      packages,\n      fastPollingDurationMs,\n      fastPollingRateMs,\n      slowPollingRateMs\n    } = this\n\n    const now = Date.now()\n\n    if (finish) {\n      if (this.finished) return\n      if (!this.deleteKey) return\n      this.finished = true\n    } else {\n      if (this.nextStepTime > now) return\n      if (this.isSending) return\n      if (this.reflexiveIps.length === 0) return\n    }\n\n    this.isSending = true\n\n    try {\n      const localDtlsFingerprintBase64 = hexToBase64(\n        this.dtlsFingerprint.replaceAll(':', '')\n      )\n\n      const localPeerInfo = [\n        sessionId,\n        clientId,\n        this.isSymmetric,\n        localDtlsFingerprintBase64,\n        this.startedAtTimestamp,\n        [...this.reflexiveIps]\n      ]\n\n      const payload = { r: roomId, k: contextId }\n\n      if (finish) {\n        payload.dk = this.deleteKey\n      }\n\n      const expired =\n        this.dataTimestamp === null ||\n        now - this.dataTimestamp >=\n          stateExpirationIntervalMs - stateHeartbeatWindowMs\n\n      const packagesChanged = this.lastPackages !== JSON.stringify(packages)\n      let includePackages = false\n\n      if (expired || packagesChanged || finish) {\n        // This will force a write\n        this.dataTimestamp = now\n\n        // Compact packages, expire any of them sent more than a minute ago.\n        // (ICE will timeout by then, even if other latency fails us.)\n        removeInPlace(packages, pkg => {\n          const sentAt = pkg[pkg.length - 2]\n          return now - sentAt > 60 * 1000\n        })\n\n        includePackages = true\n      }\n\n      if (finish) {\n        includePackages = false\n      }\n\n      // The first poll should just be a read, no writes, to build up packages before we do a write\n      // to reduce worker I/O. So don't include the data + packages on the first request.\n      if (this.sentFirstPoll) {\n        payload.d = localPeerInfo\n        payload.t = this.dataTimestamp\n        payload.x = this.stateExpirationIntervalMs\n\n        if (includePackages) {\n          payload.p = packages\n          this.lastPackages = JSON.stringify(packages)\n        }\n      }\n\n      const body = JSON.stringify(payload)\n      const headers = { 'Content-Type': 'application/json ' }\n      let keepalive = false\n\n      if (finish) {\n        headers['X-Worker-Method'] = 'DELETE'\n        keepalive = true\n      }\n\n      const res = await fetch(this.workerUrl, {\n        method: 'POST',\n        headers,\n        body,\n        keepalive\n      })\n\n      const { ps: remotePeerDatas, pk: remotePackages, dk } = await res.json()\n\n      if (dk) {\n        this.deleteKey = dk\n      }\n\n      if (finish) return\n\n      // Slight optimization: if the peers are empty on the first poll, immediately publish data to reduce\n      // delay before first peers show up.\n      if (remotePeerDatas.length === 0 && !this.sentFirstPoll) {\n        payload.d = localPeerInfo\n        payload.t = this.dataTimestamp\n        payload.x = this.stateExpirationIntervalMs\n        payload.p = packages\n        this.lastPackages = JSON.stringify(packages)\n\n        const res = await fetch(this.workerUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n        })\n\n        const { dk } = await res.json()\n\n        if (dk) {\n          this.deleteKey = dk\n        }\n      }\n\n      this.sentFirstPoll = true\n\n      const previousPeerSessionIds = [...this.peers.keys()]\n\n      this._handleWorkerResponse(\n        localPeerInfo,\n        localDtlsFingerprintBase64,\n        packages,\n        remotePeerDatas,\n        remotePackages\n      )\n\n      const activeSessionIds = remotePeerDatas.map(p => p[0])\n\n      const peersChanged =\n        previousPeerSessionIds.length !== activeSessionIds.length ||\n        activeSessionIds.find(c => !previousPeerSessionIds.includes(c)) ||\n        previousPeerSessionIds.find(c => !activeSessionIds.includes(c))\n\n      // Rate limit requests when room is empty, or look for new joins\n      // Go faster when things are changing to avoid ICE timeouts\n      if (peersChanged) {\n        this.stopFastPollingAt = now + fastPollingDurationMs\n      }\n\n      if (now < this.stopFastPollingAt) {\n        this.nextStepTime = now + fastPollingRateMs\n      } else {\n        this.nextStepTime = now + slowPollingRateMs\n      }\n    } catch (e) {\n      console.error(e)\n      this.nextStepTime = now + slowPollingRateMs\n    } finally {\n      this.isSending = false\n    }\n  }\n\n  _handleWorkerResponse (\n    localPeerData,\n    localDtlsFingerprintBase64,\n    localPackages,\n    remotePeerDatas,\n    remotePackages\n  ) {\n    const localStartedAtTimestamp = this.startedAtTimestamp\n\n    const {\n      dtlsCert: localDtlsCert,\n      peers,\n      lastProcessedReceivedDataTimestamps,\n      packageReceivedFromPeers,\n      stunIceServers,\n      turnIceServers\n    } = this\n    const [localSessionId, , localSymmetric] = localPeerData\n\n    const now = Date.now()\n\n    for (const remotePeerData of remotePeerDatas) {\n      const [\n        remoteSessionId,\n        remoteClientId,\n        remoteSymmetric,\n        remoteDtlsFingerprintBase64,\n        remoteStartedAtTimestamp,\n        remoteReflexiveIps,\n        remoteDataTimestamp\n      ] = remotePeerData\n\n      // Don't process the same messages twice. This covers disconnect cases where stale data re-creates a peer too early.\n      if (\n        lastProcessedReceivedDataTimestamps.get(remoteSessionId) ===\n        remoteDataTimestamp\n      ) {\n        continue\n      }\n\n      // Peer A is:\n      //   - if both not symmetric or both symmetric, whoever has the most recent data is peer A, since we want Peer B created faster,\n      //     and latency will be lowest with older data.\n      //   - if one is and one isn't, the non symmetric one is the only one who has valid candidates, so the symmetric one is peer A\n      const isPeerA =\n        localSymmetric === remoteSymmetric\n          ? localStartedAtTimestamp === remoteStartedAtTimestamp\n            ? localSessionId > remoteSessionId\n            : localStartedAtTimestamp > remoteStartedAtTimestamp\n          : localSymmetric\n\n      // If either side is symmetric, use TURN and hope we avoid connecting via relays\n      // We can't just use TURN if both sides are symmetric because one side might be port restricted and hence won't connect without a relay.\n      const iceServers =\n        localSymmetric || remoteSymmetric ? turnIceServers : stunIceServers\n\n      // Firefox answer side is very aggressive with ICE timeouts, so always delay answer set until second candidates received.\n      const delaySetRemoteUntilReceiveCandidates = isFirefox\n      const remotePackage = remotePackages.find(p => p[1] === remoteSessionId)\n\n      const peerOptions = { ...this.peerOptions, iceServers }\n\n      if (localDtlsCert) {\n        peerOptions.certificates = [localDtlsCert]\n      }\n\n      if (isPeerA) {\n        if (peers.has(remoteSessionId)) continue\n        if (!remotePackage) continue\n\n        lastProcessedReceivedDataTimestamps.set(\n          remoteSessionId,\n          remoteDataTimestamp\n        )\n\n        // If we already added the candidates from B, skip. This check is not strictly necessary given the peer will exist.\n        if (packageReceivedFromPeers.has(remoteSessionId)) continue\n        packageReceivedFromPeers.add(remoteSessionId)\n\n        //  - I create PC\n        //  - I create an answer SDP, and munge the ufrag\n        //  - Set local description with answer\n        //  - Set remote description via the received sdp\n        //  - Add the ice candidates\n\n        const [\n          ,\n          ,\n          remoteIceUFrag,\n          remoteIcePwd,\n          remoteDtlsFingerprintBase64,\n          localIceUFrag,\n          localIcePwd,\n          ,\n          remoteCandidates\n        ] = remotePackage\n\n        const peer = new Peer({\n          config: peerOptions,\n          initiator: false,\n          iceCompleteTimeout: Infinity,\n          proprietaryConstraints: this.peerProprietaryConstraints,\n          sdpTransform: sdp => {\n            const lines = []\n\n            for (const l of sdp.split('\\r\\n')) {\n              if (l.startsWith('a=ice-ufrag')) {\n                lines.push(`a=ice-ufrag:${localIceUFrag}`)\n              } else if (l.startsWith('a=ice-pwd')) {\n                lines.push(`a=ice-pwd:${localIcePwd}`)\n              } else {\n                lines.push(l)\n              }\n            }\n\n            return this.peerSdpTransform(lines.join('\\r\\n'))\n          }\n        })\n\n        peer.id = remoteSessionId\n        peer.client_id = remoteClientId\n\n        this._wireUpCommonPeerEvents(peer)\n\n        peers.set(peer.id, peer)\n\n        // Special case if both behind sym NAT or other hole punching isn't working: peer A needs to send its candidates as well.\n        const pkg = [\n          remoteSessionId,\n          localSessionId,\n          /* lfrag */ null,\n          /* lpwd */ null,\n          /* ldtls */ null,\n          /* remote ufrag */ null,\n          /* remote Pwd */ null,\n          now,\n          []\n        ]\n\n        const pkgCandidates = pkg[pkg.length - 1]\n\n        const initialCandidateSignalling = e => {\n          if (!e.candidate?.candidate) return\n          pkgCandidates.push(e.candidate.candidate)\n        }\n\n        peer.on('signal', initialCandidateSignalling)\n\n        const finishIce = () => {\n          peer.removeListener('signal', initialCandidateSignalling)\n          if (localPackages.includes(pkg)) return\n          if (pkgCandidates.length === 0) return\n\n          localPackages.push(pkg)\n        }\n\n        peer.once('_iceComplete', finishIce)\n\n        setTimeout(() => {\n          if (peer._iceComplete || peer.connected) return\n\n          console.warn(\"Peer A didn't connect in time\", peer.id)\n          peer._iceComplete = true\n          this._removePeer(peer, true)\n          this._updateConnectedSessions()\n        }, CONNECT_TIMEOUT)\n\n        const remoteSdp = createSdp(\n          true,\n          remoteIceUFrag,\n          remoteIcePwd,\n          remoteDtlsFingerprintBase64\n        )\n\n        for (const candidate of remoteCandidates) {\n          peer.signal({ candidate: { candidate, sdpMLineIndex: 0 } })\n        }\n\n        peer.signal({ type: 'offer', sdp: remoteSdp })\n      } else {\n        // I am peer B, I need to create a peer first if none exists, and send a package.\n        //   - Create PC\n        //   - Create offer\n        //   - Set local description as-is\n        //   - Generate ufrag + pwd\n        //   - Generate remote SDP using the dtls fingerprint for A, and my generated ufrag + pwd\n        //   - Add an srflx candidate for each of the reflexive IPs for A (on a random port) to hole punch\n        //   - Set remote description\n        //     so peer reflexive candidates for it show up.\n        //   - Let trickle run, then once trickle finishes send a package for A to pick up = [my session id, my offer sdp, generated ufrag/pwd, dtls fingerprint, ice candidates]\n        //   - keep the icecandidate listener active, and add the pfrlx candidates when they arrive (but don't send another package)\n        if (!peers.has(remoteSessionId)) {\n          lastProcessedReceivedDataTimestamps.set(\n            remoteSessionId,\n            remoteDataTimestamp\n          )\n\n          const remoteUfrag = randomstring(12)\n          const remotePwd = randomstring(32)\n          const peer = new Peer({\n            config: peerOptions,\n            proprietaryConstraints: this.rtcPeerConnectionProprietaryConstraints,\n            iceCompleteTimeout: Infinity,\n            initiator: true,\n            sdpTransform: this.peerSdpTransform\n          })\n\n          peer.id = remoteSessionId\n          peer.client_id = remoteClientId\n\n          this._wireUpCommonPeerEvents(peer)\n\n          peers.set(peer.id, peer)\n\n          // This is the 'package' sent to peer A that it needs to start ICE\n          const pkg = [\n            remoteSessionId,\n            localSessionId,\n            /* lfrag */ null,\n            /* lpwd */ null,\n            /* ldtls */ null,\n            remoteUfrag,\n            remotePwd,\n            now,\n            []\n          ]\n\n          const pkgCandidates = pkg[pkg.length - 1]\n\n          const initialCandidateSignalling = e => {\n            // Push package onto the given package list, so it will be sent in next polling step.\n            if (!e.candidate?.candidate) return\n            pkgCandidates.push(e.candidate.candidate)\n          }\n\n          peer.on('signal', initialCandidateSignalling)\n\n          const finishIce = () => {\n            peer.removeListener('signal', initialCandidateSignalling)\n\n            if (localPackages.includes(pkg)) return\n            if (pkgCandidates.length === 0) return\n\n            localPackages.push(pkg)\n          }\n\n          peer.once('_iceComplete', finishIce)\n\n          setTimeout(() => {\n            if (peer._iceComplete || peer.connected) return\n\n            console.warn('Peer B failed to connect in time', peer.id)\n            peer._iceComplete = true\n            this._removePeer(peer, true)\n            this._updateConnectedSessions()\n          }, CONNECT_TIMEOUT)\n\n          const enqueuePackageFromOffer = e => {\n            if (e.type !== 'offer') return\n            peer.removeListener('signal', enqueuePackageFromOffer)\n\n            for (const l of e.sdp.split('\\r\\n')) {\n              switch (l.split(':')[0]) {\n                case 'a=ice-ufrag':\n                  pkg[2] = l.substring(12)\n                  break\n                case 'a=ice-pwd':\n                  pkg[3] = l.substring(10)\n                  break\n                case 'a=fingerprint':\n                  pkg[4] = hexToBase64(l.substring(22).replaceAll(':', ''))\n                  break\n              }\n            }\n\n            // Peer A posted its reflexive IPs to try to speed up hole punching by B.\n            let remoteSdp = createSdp(\n              false,\n              remoteUfrag,\n              remotePwd,\n              remoteDtlsFingerprintBase64\n            )\n\n            for (let i = 0; i < remoteReflexiveIps.length; i++) {\n              remoteSdp += `a=candidate:0 1 udp ${i + 1} ${\n                remoteReflexiveIps[i]\n              } 30000 typ srflx\\r\\n`\n            }\n\n            if (!delaySetRemoteUntilReceiveCandidates) {\n              peer.signal({ type: 'answer', sdp: remoteSdp })\n            } else {\n              peer._pendingRemoteSdp = remoteSdp\n            }\n          }\n\n          peer.once('signal', enqueuePackageFromOffer)\n        }\n\n        if (!remotePackage) continue\n\n        // Peer B will also receive candidates in the case where hole punch fails.\n        // If we already added the candidates from A, skip\n        const [, , , , , , , , remoteCandidates] = remotePackage\n        if (packageReceivedFromPeers.has(remoteSessionId)) continue\n        if (!peers.has(remoteSessionId)) continue\n\n        const peer = peers.get(remoteSessionId)\n\n        if (\n          delaySetRemoteUntilReceiveCandidates &&\n          !peer._pc.remoteDescription &&\n          peer._pendingRemoteSdp\n        ) {\n          if (!peer.connected) {\n            for (const candidate of remoteCandidates) {\n              peer.signal({ candidate: { candidate, sdpMLineIndex: 0 } })\n            }\n          }\n\n          peer.signal({ type: 'answer', sdp: peer._pendingRemoteSdp })\n          delete peer._pendingRemoteSdp\n          packageReceivedFromPeers.add(remoteSessionId)\n        }\n\n        if (\n          !delaySetRemoteUntilReceiveCandidates &&\n          peer._pc.remoteDescription &&\n          remoteCandidates.length > 0\n        ) {\n          if (!peer.connected) {\n            for (const candidate of remoteCandidates) {\n              peer.signal({ candidate: { candidate, sdpMLineIndex: 0 } })\n            }\n          }\n\n          packageReceivedFromPeers.add(remoteSessionId)\n        }\n      }\n    }\n\n    const remoteSessionIds = remotePeerDatas.map(p => p[0])\n\n    // Remove all disconnected peers no longer in the peer list.\n    for (const [sessionId, peer] of peers.entries()) {\n      if (remoteSessionIds.includes(sessionId)) continue\n\n      if (!peer.connected) {\n        console.warn('Removing unconnected peer not in peer list', peer.id)\n        this._removePeer(peer, true)\n      }\n    }\n  }\n\n  /**\n   * Connect to network and start discovering peers\n   */\n  async start () {\n    this.startedAtTimestamp = Date.now()\n    await this._init()\n\n    const [\n      udpEnabled,\n      isSymmetric,\n      reflexiveIps,\n      dtlsFingerprint\n    ] = await this._getNetworkSettings(this.dtlsCert)\n\n    if (this.finished) return\n\n    this.udpEnabled = udpEnabled\n    this.isSymmetric = isSymmetric\n    this.reflexiveIps = reflexiveIps\n    this.dtlsFingerprint = dtlsFingerprint\n\n    this.networkSettingsInterval = setInterval(async () => {\n      const [\n        newUdpEnabled,\n        newIsSymmetric,\n        newReflexiveIps,\n        newDtlsFingerprint\n      ] = await this._getNetworkSettings(this.dtlsCert)\n\n      if (\n        newUdpEnabled !== this.udpEnabled ||\n        newIsSymmetric !== this.isSymmetric ||\n        newDtlsFingerprint !== this.dtlsFingerprint ||\n        !![...newReflexiveIps].find(ip => ![...this.reflexiveIps].find(ip2 => ip === ip2)) ||\n        !![...reflexiveIps].find(ip => ![...newReflexiveIps].find(ip2 => ip === ip2))\n      ) {\n        // Network changed, force pushing new data\n        this.dataTimestamp = null\n      }\n\n      this.udpEnabled = newUdpEnabled\n      this.isSymmetric = newIsSymmetric\n      this.reflexiveIps = newReflexiveIps\n      this.dtlsFingerprint = newDtlsFingerprint\n    }, this.networkChangePollIntervalMs)\n\n    this._step = this._step.bind(this)\n    this.stepInterval = setInterval(this._step, 500)\n    this.destroyOnUnload = () => this.destroy()\n\n    for (const ev of iOSSafari ? ['pagehide'] : ['unload']) {\n      window.addEventListener(ev, this.destroyOnUnload)\n    }\n  }\n\n  _removePeer (peer, destroy = false) {\n    const { packageReceivedFromPeers, packages, peers } = this\n    if (!peers.has(peer.id)) return\n\n    removeInPlace(packages, pkg => pkg[0] === peer.id)\n    packageReceivedFromPeers.delete(peer.id)\n\n    peers.delete(peer.id)\n\n    if (destroy) {\n      peer.destroy()\n    }\n\n    this.emit('peerclose', peer)\n  }\n\n  /**\n   * Send a msg and get response for it\n   * @param Peer peer simple-peer object to send msg to\n   * @param string msg Message to send\n   * @param integer msgID ID of message if it's a response to a previous message\n   */\n  send (peer, msg) {\n    if (!peer.connected) return\n\n    // if leading byte is zero\n    //   next two bytes is message id, then remaining bytes\n    // otherwise its just raw\n    let dataArrBuffer = null\n\n    let messageId = null\n\n    if (msg instanceof ArrayBuffer) {\n      dataArrBuffer = msg\n    } else if (msg instanceof Uint8Array) {\n      if (msg.buffer.byteLength === msg.length) {\n        dataArrBuffer = msg.buffer\n      } else {\n        dataArrBuffer = msg.buffer.slice(msg.byteOffset, msg.byteOffset + msg.byteLength)\n      }\n    } else {\n      throw new Error('Unsupported send data type', msg)\n    }\n\n    // If the magic word happens to be the beginning of this message, chunk it\n    if (\n      dataArrBuffer.byteLength > MAX_MESSAGE_LENGTH_BYTES ||\n      new Uint16Array(dataArrBuffer, 0, 1) === CHUNK_MAGIC_WORD\n    ) {\n      messageId = Math.floor(Math.random() * 256 * 128)\n    }\n\n    if (messageId !== null) {\n      for (\n        let offset = 0, chunkId = 0;\n        offset < dataArrBuffer.byteLength;\n        offset += CHUNK_MAX_LENGTH_BYTES, chunkId++\n      ) {\n        const chunkSize = Math.min(\n          CHUNK_MAX_LENGTH_BYTES,\n          dataArrBuffer.byteLength - offset\n        )\n        let bufSize = CHUNK_HEADER_LENGTH_BYTES + chunkSize\n\n        while (bufSize % 4 !== 0) {\n          bufSize++\n        }\n\n        const buf = new ArrayBuffer(bufSize)\n        new Uint8Array(buf, CHUNK_HEADER_LENGTH_BYTES).set(\n          new Uint8Array(dataArrBuffer, offset, chunkSize)\n        )\n        const u16 = new Uint16Array(buf)\n        const u32 = new Uint32Array(buf)\n\n        u16[0] = CHUNK_MAGIC_WORD\n        u16[1] = messageId\n        u16[2] = chunkId\n        u16[3] =\n          offset + CHUNK_MAX_LENGTH_BYTES >= dataArrBuffer.byteLength ? 1 : 0\n        u32[2] = dataArrBuffer.byteLength\n\n        peer.send(buf)\n      }\n    } else {\n      peer.send(dataArrBuffer)\n    }\n  }\n\n  broadcast (msg) {\n    for (const peer of this.peers.values()) {\n      this.send(peer, msg)\n    }\n  }\n\n  /**\n   * Destroy object\n   */\n  destroy () {\n    if (this._step) {\n      this._step(true)\n    }\n\n    if (this.networkSettingsInterval) {\n      clearInterval(this.networkSettingsInterval)\n      this.networkSettingsInterval = null\n    }\n\n    if (this.stepInterval) {\n      clearInterval(this.stepInterval)\n      this.stepInterval = null\n    }\n\n    if (this.destroyOnUnload) {\n      for (const ev of iOSSafari ? ['pagehide'] : ['beforeunload', 'unload']) {\n        window.removeEventListener(ev, this.destroyOnUnload)\n      }\n\n      this.destroyOnUnload = null\n    }\n\n    for (const peer of this.peers.values()) {\n      peer.destroy()\n    }\n  }\n\n  /**\n   * Handle msg chunks. Returns false until the last chunk is received. Finally returns the entire msg\n   * @param object data\n   */\n  _chunkHandler (data, messageId, chunkId) {\n    let target = null\n\n    if (!this.msgChunks.has(messageId)) {\n      const totalLength = new Uint32Array(data, 0, 3)[2]\n      target = new Uint8Array(totalLength)\n      this.msgChunks.set(messageId, target)\n    } else {\n      target = this.msgChunks.get(messageId)\n    }\n\n    const offsetToSet = chunkId * CHUNK_MAX_LENGTH_BYTES\n\n    const numBytesToSet = Math.min(\n      target.byteLength - offsetToSet,\n      CHUNK_MAX_LENGTH_BYTES\n    )\n\n    target.set(\n      new Uint8Array(data, CHUNK_HEADER_LENGTH_BYTES, numBytesToSet),\n      chunkId * CHUNK_MAX_LENGTH_BYTES\n    )\n\n    return target.buffer\n  }\n\n  _updateConnectedSessions () {\n    this.connectedSessions.length = 0\n\n    for (const [sessionId, peer] of this.peers) {\n      if (peer.connected) {\n        this.connectedSessions.push(sessionId)\n        continue\n      }\n    }\n  }\n\n  async _getNetworkSettings () {\n    await this._init()\n\n    let dtlsFingerprint = null\n    const candidates = []\n    const reflexiveIps = new Set()\n\n    const peerOptions = { iceServers: this.stunIceServers }\n\n    if (this.dtlsCert) {\n      peerOptions.certificates = [this.dtlsCert]\n    }\n\n    const pc = new this.wrtc.RTCPeerConnection(peerOptions)\n    const dc = pc.createDataChannel('x')\n\n    const p = new Promise(resolve => {\n      setTimeout(() => resolve(), 5000)\n\n      pc.onicecandidate = e => {\n        if (!e.candidate) return resolve()\n\n        if (e.candidate.candidate) {\n          candidates.push(parseCandidate(e.candidate.candidate))\n        }\n      }\n    })\n\n    pc.createOffer().then(offer => {\n      for (const l of offer.sdp.split('\\n')) {\n        if (l.indexOf('a=fingerprint') === -1) continue\n        dtlsFingerprint = l.split(' ')[1].trim()\n      }\n\n      pc.setLocalDescription(offer)\n    })\n\n    await p\n\n    dc.close()\n    pc.close()\n\n    let isSymmetric = false\n    let udpEnabled = false\n\n    // Network is not symmetric if we can find a srflx candidate that has a unique related port\n    /* eslint-disable no-labels */\n    loop: for (const c of candidates) {\n      /* eslint-enable no-labels */\n      if (c[0] !== CANDIDATE_TYPES.srflx) continue\n      udpEnabled = true\n\n      reflexiveIps.add(c[CANDIDATE_IDX.IP])\n\n      for (const d of candidates) {\n        if (d[0] !== CANDIDATE_TYPES.srflx) continue\n        if (c === d) continue\n\n        if (\n          typeof c[CANDIDATE_IDX.RELATED_PORT] === 'number' &&\n          typeof d[CANDIDATE_IDX.RELATED_PORT] === 'number' &&\n          c[CANDIDATE_IDX.RELATED_PORT] === d[CANDIDATE_IDX.RELATED_PORT] &&\n          c[CANDIDATE_IDX.PORT] !== d[CANDIDATE_IDX.PORT]\n        ) {\n          // check port and related port\n          // Symmetric, continue\n          isSymmetric = true\n          break\n        }\n      }\n    }\n\n    return [udpEnabled, isSymmetric, reflexiveIps, dtlsFingerprint]\n  }\n\n  _handlePeerError (peer, err) {\n    if (\n      err.errorDetail === 'sctp-failure' &&\n      err.message.indexOf('User-Initiated Abort') >= 0\n    ) {\n      return // Benign shutdown\n    }\n\n    console.error(err)\n  }\n\n  _checkForSignalOrEmitMessage (peer, msg) {\n    if (msg.byteLength < SIGNAL_MESSAGE_HEADER_WORDS.length * 2) {\n      this.emit('msg', peer, msg)\n      return\n    }\n\n    const u16 = new Uint16Array(msg, 0, SIGNAL_MESSAGE_HEADER_WORDS.length)\n\n    for (let i = 0; i < SIGNAL_MESSAGE_HEADER_WORDS.length; i++) {\n      if (u16[i] !== SIGNAL_MESSAGE_HEADER_WORDS[i]) {\n        this.emit('msg', peer, msg)\n        return\n      }\n    }\n\n    const u8 = new Uint8Array(msg, SIGNAL_MESSAGE_HEADER_WORDS.length * 2)\n\n    let payload = arrToText(u8)\n\n    // Might have a trailing byte\n    if (payload.endsWith('\\0')) {\n      payload = payload.substring(0, payload.length - 1)\n    }\n\n    peer.signal(payload)\n  }\n\n  _wireUpCommonPeerEvents (peer) {\n    peer.on('connect', () => {\n      this.emit('peerconnect', peer)\n\n      // Remove packages for the peer once connected\n      removeInPlace(this.packages, pkg => pkg[0] === peer.id)\n      this._updateConnectedSessions()\n    })\n\n    peer.on('data', data => {\n      let messageId = null\n      let u16 = null\n      if (data.byteLength >= CHUNK_HEADER_LENGTH_BYTES) {\n        u16 = new Uint16Array(data, 0, CHUNK_HEADER_LENGTH_BYTES / 2)\n\n        if (u16[0] === CHUNK_MAGIC_WORD) {\n          messageId = u16[1]\n        }\n      }\n      if (messageId !== null) {\n        try {\n          const chunkId = u16[2]\n          const last = u16[3] !== 0\n          const msg = this._chunkHandler(data, messageId, chunkId, last)\n          if (last) {\n            this._checkForSignalOrEmitMessage(peer, msg)\n            this.msgChunks.delete(messageId)\n          }\n        } catch (e) {\n          console.error(e)\n        }\n      } else {\n        this._checkForSignalOrEmitMessage(peer, data)\n      }\n    })\n\n    peer.on('error', err => {\n      console.warn(err)\n    })\n\n    peer.on('close', () => {\n      this._removePeer(peer)\n      this._updateConnectedSessions()\n    })\n\n    // Once ICE completes, perform subsequent signalling via the datachannel\n    peer.on('signal', signalData => {\n      const payloadBytes = textToArr(\n        JSON.stringify(signalData)\n      )\n\n      let len =\n        payloadBytes.byteLength + SIGNAL_MESSAGE_HEADER_WORDS.length * 2\n\n      if (len % 2 !== 0) {\n        len++\n      }\n\n      // Add signal header\n      const buf = new ArrayBuffer(len)\n      const u8 = new Uint8Array(buf)\n      const u16 = new Uint16Array(buf)\n\n      u8.set(payloadBytes, SIGNAL_MESSAGE_HEADER_WORDS.length * 2)\n\n      for (let i = 0; i < SIGNAL_MESSAGE_HEADER_WORDS.length; i++) {\n        u16[i] = SIGNAL_MESSAGE_HEADER_WORDS[i]\n      }\n\n      this.send(peer, buf)\n    })\n  }\n}\n"],"names":["ReflectApply","ReflectOwnKeys","NumberIsNaN","EventEmitter","eventsModule","events","once","listeners","ms","require$$0","debug","self","chars","randomString","global","errCode","getBrowserRTC","require$$1","randomstring","require$$2","queueMicrotask","require$$3","require$$4","require$$5","err","event","convertHex","this","arrayBufferToHex","arrayBufferToBase64","hexToBytes","base64ToArrayBuffer","res","dk","remoteDtlsFingerprintBase64","Peer","peer"],"mappings":"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"}